!function(){"use strict";var t="undefined"==typeof window?global:window;if("function"!=typeof t.require){var e={},o={},a={}.hasOwnProperty,n={},r=function(t,e){var o=0;e&&(e.indexOf(!1)&&(o="components/".length),e.indexOf("/",o)>0&&(e=e.substring(o,e.indexOf("/",o))));var a=n[t+"/index.js"]||n[e+"/deps/"+t+"/index.js"];return a?"components/"+a.substring(0,a.length-".js".length):t},i=function(){var t=/^\.\.?(\/|$)/;return function(e,o){var a,n,r=[];a=(t.test(o)?e+"/"+o:o).split("/");for(var i=0,s=a.length;s>i;i++)n=a[i],".."===n?r.pop():"."!==n&&""!==n&&r.push(n);return r.join("/")}}(),s=function(t){return t.split("/").slice(0,-1).join("/")},c=function(e){return function(o){var a=i(s(e),o);return t.require(a,e)}},l=function(t,e){var a={id:t,exports:{}};return o[t]=a,e(a.exports,c(t),a),a.exports},d=function(t,n){var s=i(t,".");if(null==n&&(n="/"),s=r(t,n),a.call(o,s))return o[s].exports;if(a.call(e,s))return l(s,e[s]);var c=i(s,"./index");if(a.call(o,c))return o[c].exports;if(a.call(e,c))return l(c,e[c]);throw new Error('Cannot find module "'+t+'" from "'+n+'"')};d.alias=function(t,e){n[e]=t},d.register=d.define=function(t,o){if("object"==typeof t)for(var n in t)a.call(t,n)&&(e[n]=t[n]);else e[t]=o},d.list=function(){var t=[];for(var o in e)a.call(e,o)&&t.push(o);return t},d.brunch=!0,t.require=d}}(),require.register("application",function(t,e,o){var a,n,r,i,s,c,l,d,u,p=function(t,e){function o(){this.constructor=t}for(var a in e)m.call(e,a)&&(t[a]=e[a]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},m={}.hasOwnProperty;d=e("routes"),i=e("models/config"),s=e("collections/contacts"),c=e("collections/filtered"),u=e("collections/tags"),a=e("views/app_layout"),n=e("views/models/app"),l=e("lib/intent_manager"),r=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return p(o,t),o.prototype.initialize=function(){return this.on("before:start",function(){var t;return t=new i(e("imports").config),this.model=new n(null,{model:t}),this.contacts=new s,this.filtered=new c,this.tags=new u,this.layout=new a({model:this.model}),this.router=new d,this.intentManager=new l,"function"==typeof Object.freeze?Object.freeze(this):void 0}),this.on("start",function(){return this.layout.render(),this.contacts.fetch({reset:!0}),this.tags.fetch({reset:!0}),Backbone.history?Backbone.history.start({pushState:!1}):void 0})},o.prototype.search=function(t,o){var a,n,r,i;return n=this.model.get("filter"),r="`"+t+":"+o+"`",a=e("config").search.pattern(t),i=null!=n?n.match(a):void 0,o?i?n=n.replace(a,r):(null!=n?n.length:void 0)?n+=r:n=r:i&&(n=n.replace(a,"")),this.model.set("filter",n),this.vent.trigger("filter:"+t,o)},o}(Mn.Application),o.exports=new r}),require.register("collections/contacts",function(t,e,o){var a,n,r,i=function(t,e){function o(){this.constructor=t}for(var a in e)s.call(e,a)&&(t[a]=e[a]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=e("lib/contacts_listener"),r=function(t){var e;return e=function(t,o){var a;return a=[t,o].map(function(t){var o;return o=t.get("n").split(";"),"gn"===e.sort?""+o[0]+o[1]:""+o[1]+o[0]}),t=a[0],o=a[1],t.localeCompare(o)},e.sort=t,e},o.exports=a=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return i(o,t),o.prototype.model=e("models/contact"),o.prototype.url="contacts",o.prototype.initialize=function(){var t;return t=e("application").model,this.comparator=r(t.get("sort")),this.listenTo(t,"change:sort",function(t){return function(e,o){return t.comparator.sort=o,t.sort()}}(this)),this.listenTo(this,"change:n",this.sort),this.listenToOnce(this,"sync",function(){return(new n).watch(this)}),this.tagMap={},this.on("reset",this.resetTagMap),this.on("add",this.addTags),this.on("update",this.addTags)},o.prototype.resetTagMap=function(){var t,e,o,a,n,r,i;for(this.tagMap={},a=this.models,n=[],e=0,o=a.length;o>e;e++)t=a[e],i=t.get("tags")||[],n.push(function(){var t,e,o;for(o=[],t=0,e=i.length;e>t;t++)r=i[t],o.push(this.tagMap[r]=!0);return o}.call(this));return n},o.prototype.addTags=function(t){var e,o,a,n,r;for(r=t.get("tags")||[],a=[],e=0,o=r.length;o>e;e++)n=r[e],a.push(this.tagMap[n]=!0);return a},o.prototype.importFromVCF=function(t){var e,o,a;return o=0,e=t.trimRight().split(/END:VCARD/gi).filter(function(t){return!_.isEmpty(t)}).map(function(t){return t+"END:VCARD"}),this.trigger("before:import:progress",e.length),a=function(t){return function(){var n,r;return n=e.pop(),n?(r=new VCardParser,r.read(n),t.create(r.contacts[0],{parse:!0}),t.trigger("import:progress",++o),setTimeout(a)):t.trigger("import",o)}}(this),setTimeout(a,35)},o}(Backbone.Collection)}),require.register("collections/duplicates",function(t,e,o){var a,n,r=function(t,e){function o(){this.constructor=t}for(var a in e)i.call(e,a)&&(t[a]=e[a]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;a=e("lib/compare_contacts"),o.exports=n=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return r(o,t),o.prototype.model=e("views/models/merge"),o.prototype.url=null,o.prototype.initialize=function(t,e){var o,n;return(o=e.collection)?(n=a.findSimilars(o.toJSON()),n.forEach(function(t){return function(e){return e=e.map(function(t){return o.get(t.id)}),t.add({candidates:e})}}(this))):void 0},o}(Backbone.Collection)}),require.register("collections/filtered",function(t,e,o){var a,n,r,i,s,c,l=function(t,e){return function(){return t.apply(e,arguments)}};a=e("views/models/contact"),i=e("config").indexes,c=e("config").search.pattern("tag"),r=null,s=function(t,e){var o;return o=function(a,n){return o.scored?(e.get(null!=n?n.model:void 0)||0)-e.get(a.model):t.indexOf(a.model)-t.indexOf(null!=n?n.model:void 0)},o.scored=!1,o},o.exports=n=function(){function t(){this._filter=l(this._filter,this),r=e("application"),this.sortIdx="fn"===r.model.get("sort")?0:1,this.underlying=r.contacts,this.models=[],this.scores=new WeakMap,this.indexes=new Map(Array.prototype.map.call(i,function(t){return[t,[]]})),this.query=null,this.comparator=s(this.underlying,this.scores),this.listenTo(r.model,{"change:scored":function(t){return function(e,o){return t.comparator.scored=o}}(this)}),this.listenTo(r.vent,{"filter:text":this.updateQuery}),this.listenTo(this.underlying,{reset:this.reset,update:function(){return this.trigger("update",this)},add:function(t){return this.add([t])},remove:function(t){return this.remove(this.models.filter(function(e){return e.model===t}))},sort:function(){return this.sortIdx="fn"===r.model.get("sort")?0:1,this.sort(),this.resetIndexes()}})}return t.prototype._filter=function(t){var e;if(null!=this.query){if(e=t.match(this.query).score,!e)return this.scores["delete"](t),!1;this.scores.set(t,e)}return!0},t.prototype.updateIndex=function(t,e){var o,a,n,r;return null==e&&(e=!0),a=(null!=(n=t.get("initials")[this.sortIdx])?n.toLowerCase():void 0)||"",r=this.indexes.get(/[a-z]/.test(a)?a:"#"),_.includes(r,t)?t:(e?(o=_.sortedIndex(r,t,this.comparator),r.splice(o,0,t)):r.push(t),t)},t.prototype.resetIndexes=function(){return this.indexes.forEach(function(t){return t.length=0}),this.models.forEach(function(t){return function(e){return t.updateIndex(e,!1)}}(this)),this.trigger("reset",this)},t.prototype.updateQuery=function(t){var e,o,a,n;return this.query=t,t?(e=this.underlying.filter(this._filter),a=this.models.filter(function(t){return _.includes(e,t.model)}),n=_.difference(this.models,a),o=_.difference(e,a.map(function(t){return t.model})),this.remove(n),this.sort(),this.add(o),this.trigger("update",this)):this.reset()},t.prototype.add=function(t){var e;return e={add:!0,remove:!1,merge:!1},t.forEach(function(t){return function(o){var n,r;if(t._filter(o))return r=new a({},{model:o}),n=_.sortedIndex(t.models,r,t.comparator),t.models.splice(n,0,r),t.updateIndex(r),t._modelEvents("add",r,e)}}(this))},t.prototype.remove=function(t){return t.forEach(function(t){return function(e){return _.includes(t.models,e)?(t.indexes.forEach(function(t){return _.pull(t,e)}),_.pull(t.models,e),t._modelEvents("remove",e)):void 0}}(this))},t.prototype.sort=function(){return this.models.sort(this.comparator),this.trigger("sort",this)},t.prototype.reset=function(){return this.models=this.underlying.filter(this._filter).map(function(t){return new a({},{model:t})}),this.resetIndexes()},t.prototype.get=function(t){var e,o,a;return null==t&&(t={}),e=t.index?this.indexes.get(t.index):this.models,a=_.last(null!=(o=r.model.get("filter"))?o.match(c):void 0),a&&t.tagged?e.filter(function(t){return _.includes(t.get("tags"),a)}):e},t.prototype._modelEvents=function(t,e,o){var a;return null==o&&(o={}),a=[t,e,this,o],this.trigger.apply(e,a),this.trigger.apply(this,a)},t}(),_.extend(n.prototype,Backbone.Events)}),require.register("collections/tags",function(t,e,o){var a,n,r=function(t,e){function o(){this.constructor=t}for(var a in e)i.call(e,a)&&(t[a]=e[a]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;n=e("lib/tags_listener"),o.exports=a=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return r(o,t),o.prototype.model=e("models/tag"),o.prototype.url="tags",o.prototype.initialize=function(){return this.listenToOnce(this,"sync",function(){return(new n).watch(this)})},o.prototype.parse=function(t){return _.uniq(t,function(t){return t.name.toLowerCase()})},o}(Backbone.Collection)}),require.register("config",function(t,e,o){o.exports={contact:{xtras:["bday"],datapoints:{main:["tel","email","adr"],types:{"default":["main","work","home"],social:["twitter:social","skype:chat"],url:["website","blog"]}}},settings:{sortkeys:["gn","fn"]},indexes:"abcdefghijklmnopqrstuvwxyz#",colorSet:["304FFE","2979FF","00B0FF","00DCE9","00D5B8","00C853","E70505","FF5700","FF7900","FFA300","B3C51D","64DD17","FF2828","F819AA","AA00FF","6200EA","7190AB","51658D"],search:{pattern:function(t,e){return e=t?"i":"ig",new RegExp("`"+(t||"\\w+")+":([^`]+)`",e)}}}}),require.register("initialize",function(t,e,o){var a;window.onerror=function(t,e,o,a,n){var r,i,s;return console.error(t,e,o,a,n,null!=n?n.stack:void 0),i=(null!=n?n.toString():void 0)||t,i!==window.lastError?(r={data:{type:"error",error:{msg:t,name:null!=n?n.name:void 0,full:i,stack:null!=n?n.stack:void 0},url:e,line:o,col:a,href:window.location.href}},s=new XMLHttpRequest,s.open("POST","log",!0),s.setRequestHeader("Content-Type","application/json;charset=UTF-8"),s.send(JSON.stringify(r)),window.lastError=i):void 0},a=e("./application"),$(function(){return ColorHash.addScheme("cozy",e("config").colorSet),Mn.Behaviors.behaviorsLookup=e("lib/behaviors"),window.t=e("lib/i18n"),a.start()})}),require.register("lib/behaviors/confirm",function(t,e,o){var a,n,r=function(t,e){function o(){this.constructor=t}for(var a in e)i.call(e,a)&&(t[a]=e[a]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;n=e("lib/views/confirm"),o.exports=a=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return r(o,t),o.prototype.ui={confirms:"[data-confirm]"},o.prototype.events={"click @ui.confirms":"confirm"},o.prototype.initialize=function(t){return this.events=_.extend({},this.events,this._buildTriggers())},o.prototype.confirm=function(t){var e;return t.preventDefault(),t.stopPropagation(),e=this.$(t.currentTarget).data("confirm"),this._triggerView(e)},o.prototype._buildTriggers=function(){var t;return t=this.view,_.reduce(this.options.triggers,function(t,e,o){var a,n;return a=function(){return _.defaults({},_.isFunction(e)?e():e,{preventDefault:!0,stopPropagation:!0})},_.isFunction(e)||(n=a()),t[o]=function(t){var o;return _.isFunction(e)&&(n=a()),t&&(t.preventDefault&&n.preventDefault&&t.preventDefault(),t.stopPropagation&&n.stopPropagation&&t.stopPropagation()),o=this._triggerView(n)},t},{})},o.prototype._triggerView=function(t){var o,a,r;return o=e("application"),r=_.pick(t,"title","message","btn_ok","btn_cancel"),a=new n({model:new Backbone.Model(r)}),this.view.$el.attr("aria-busy",!0),Mn.bindEntityEvents(this,a,{"confirm:close":function(){return this.view.$el.attr("aria-busy",!1),this.view.triggerMethod("confirm:close")},"confirm:true":function(){return this.view.triggerMethod("confirm:true"),t.event?this.view.triggerMethod(t.event):void 0}}),o.layout.showChildView("alerts",a),a},o}(Mn.Behavior)}),require.register("lib/behaviors/dialog",function(t,e,o){var a,n=function(t,e){function o(){this.constructor=t}for(var a in e)r.call(e,a)&&(t[a]=e[a]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},r={}.hasOwnProperty;o.exports=a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.behaviors={Keyboard:{keymaps:{27:"key:escape"}}},e.prototype.ui={backdrop:'[role="separator"]',content:'[role="contentinfo"]'},e.prototype.triggers={"click @ui.backdrop":"click:backdrop"},e.prototype.events={"click @ui.content":"detectClickOutside"},e.prototype.initialize=function(){return this.listenTo(this.view,"click:backdrop",this.close),this.listenTo(this.view,"key:escape",this.close)},e.prototype.close=function(){return this.view.triggerMethod("dialog:close")},e.prototype.detectClickOutside=function(t){var e,o,a;if(t.pageX||t.pageY)return e=this.ui.content[0].getBoundingClientRect(),a=t.pageX<e.left||t.pageX>e.right,o=t.pageY<e.top||t.pageY>e.bottom,o&&a?this.close():void 0},e}(Mn.Behavior)}),require.register("lib/behaviors/dropdown",function(t,e,o){var a,n=function(t,e){function o(){this.constructor=t}for(var a in e)r.call(e,a)&&(t[a]=e[a]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},r={}.hasOwnProperty;o.exports=a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.ui={trigger:'[aria-haspopup="true"] > :first-child'},e.prototype.events={"click @ui.trigger":"toggleExpand",click:"closeAll"},e.prototype.toggleExpand=function(t){var e;return t.stopPropagation(),e=this.$(t.currentTarget).parent("[aria-haspopup]"),this.closeAll(e),e.attr("aria-expanded","true"!==e.attr("aria-expanded"))},e.prototype.closeAll=function(t){return this.$('[aria-haspopup="true"]').not(t).attr("aria-expanded",!1)},e}(Mn.Behavior)}),require.register("lib/behaviors/form",function(t,e,o){var a,n=function(t,e){function o(){this.constructor=t}for(var a in e)r.call(e,a)&&(t[a]=e[a]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},r={}.hasOwnProperty;o.exports=a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.behaviors={Keyboard:{keymaps:{13:{event:"form:key:enter",preventDefault:!1}}}},e.prototype.events=function(){return{"click @ui.formAdd":"addField","keyup @ui.formAutoAdd":"addField","keyup @ui.formInputs":_.debounce(this.updateFields,250),"change @ui.formInputs":"updateFields","click @ui.formClear":"clearField","click @ui.formDelete":"deleteField"}},e.prototype.triggers={"click @ui.formSubmit":"form:submit"},e.prototype.updateFields=function(t,e){var o,a;return null==e&&(e=t.currentTarget),(o={}).setValueOf(e.name,e.value),null!=(a=this.view.model)&&a.set(o,{silent:!0}),e.classList.toggle("empty",""===e.value),this.view.triggerMethod("form:field:update",e,t)},e.prototype.addField=function(t){var e,o,a;return"click"===t.type?this.view.triggerMethod("form:field:add",t.currentTarget.value):(e=this.$(t.currentTarget).parents("[data-type]"),a=e.data("type"),(o=!!e.find(".value").filter(function(){return!this.value}).length)?void 0:this.view.triggerMethod("form:field:add",a))},e.prototype.clearField=function(t){var e;return e=this.$(t.currentTarget).prev(".value"),e.val(null),this.view.triggerMethod("form:field:clear",t),this.updateFields(t,e[0])},e.prototype.deleteField=function(t){var e;return e=this.$(t.currentTarget).parents("[data-cid]").data("cid"),this.view.triggerMethod("form:field:delete",e,t)},e}(Mn.Behavior)}),require.register("lib/behaviors/index",function(t,e,o){var a;a={Confirm:e("./confirm"),Dialog:e("./dialog"),Dropdown:e("./dropdown"),Form:e("./form"),Keyboard:e("./keyboard"),Navigator:e("./navigator"),PickAvatar:e("./pickavatar")},o.exports=a}),require.register("lib/behaviors/keyboard",function(t,e,o){var a,n=function(t,e){function o(){this.constructor=t}for(var a in e)r.call(e,a)&&(t[a]=e[a]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},r={}.hasOwnProperty,i=[].indexOf||function(t){for(var e=0,o=this.length;o>e;e++)if(e in this&&this[e]===t)return e;return-1};o.exports=a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.defaults={eventName:"keydown"},e.prototype.events=function(){var t,e;if(this.options.keymaps)return e=_.reduce(this.options.keymaps,this._buildKeyboardTrigger,{}),(t={})[this.options.eventName]=function(t){return function(o){var a;return a=o.which.toString(),i.call(_.keys(e),a)<0?void 0:e[a].call(t,o)}}(this),t},e.prototype._buildKeyboardTrigger=function(t,e,o){var a,n,r;return n=_.isObject(e),r=_.defaults({},n?e:{},{preventDefault:!0,stopPropagation:!0}),a=n?r.event:e,t[o]=function(t){return t&&(t.preventDefault&&r.preventDefault&&t.preventDefault(),t.stopPropagation&&r.stopPropagation&&t.stopPropagation()),this.view.triggerMethod(a,t)},t},e}(Mn.Behavior)}),require.register("lib/behaviors/navigator",function(t,e,o){var a,n=function(t,e){function o(){this.constructor=t}for(var a in e)r.call(e,a)&&(t[a]=e[a]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},r={}.hasOwnProperty;o.exports=a=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.behaviors={Confirm:{}},o.prototype.events={"click @ui.navigate":"navigate"},o.prototype.navigate=function(t){var o;return t.preventDefault(),o=function(){var o,a;return a=t.currentTarget,o=a.dataset.next||a.getAttribute("href"),e("application").router.navigate(o,{trigger:!0})},t.currentTarget.dataset.confirm?Mn.bindEntityEvents(this,this.view,{"confirm:true":o,"confirm:close":function(){return Mn.unbindEntityEvents(this,this.view)}}):o()},o}(Mn.Behavior)}),require.register("lib/behaviors/pickavatar",function(t,e,o){var a,n=function(t,e){return function(){return t.apply(e,arguments)}},r=function(t,e){function o(){this.constructor=t}for(var a in e)i.call(e,a)&&(t[a]=e[a]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;o.exports=a=function(t){function o(){return this.choosePhoto_answer=n(this.choosePhoto_answer,this),this.choosePhoto=n(this.choosePhoto,this),o.__super__.constructor.apply(this,arguments)}return r(o,t),o.prototype.events=function(){return{"click @ui.avatar":"choosePhoto"}},o.prototype.choosePhoto=function(){var t,o,a;return t=e("application"),o={type:"pickObject",params:{objectType:"singlePhoto",isCropped:!0,proportion:1,maxWidth:10,minWidth:10}},a=108e5,t.intentManager.send("nameSpace",o,a).then(this.choosePhoto_answer,function(t){return console.error("contact : response in error : ",t)})},o.prototype.choosePhoto_answer=function(t){var e,o;return e=t.data,e.newPhotoChosen&&null!=(o=this.view.model)?o.set("avatar",e.dataUrl):void 0},o}(Mn.Behavior)}),require.register("lib/compare_contacts",function(t,e,o){var a,n,r,i,s,c;n=e("lib/contact_helper"),o.exports=a={},a.isSamePerson=function(t,e){return t.fn===e.fn&&t.datapoints.some(function(t){var o;return"tel"===(o=t.name)||"adr"===o||"email"===o||"chat"===o?c(t,e):!1})},a.mayBeSamePerson=function(t,e){return s(t.n,e.n)>0},a.findSimilars=function(t){var e,o,n,r,i,s,c,l,d;for(d={},l=[],n=0,i=t.length;i>n;n++){for(e=t[n],d[e._id]=!0,c=[e],r=0,s=t.length;s>r;r++)o=t[r],o._id in d||!a.mayBeSamePerson(e,o)||(d[o._id]=!0,c.push(o));c.length>1&&l.push(c)}return l},a.mergeContacts=function(t,e){return e.datapoints.forEach(function(e){return c(e,t,!0)?void 0:t.datapoints.push(e)}),delete e.datapoints,null!=e.accounts&&(e.accounts.forEach(function(e){return n.hasAccount(t,e.type,e.name)?void 0:n.setAccount(t,e)}),delete e.accounts),t.tags=i(t.tags,e.tags),delete e.tags,null!=e.note&&""!==e.note&&null!=t.note&&""!==t.note&&(t.note+="\n"+e.note),delete e.note,t=r(t,e)},s=function(t,e){var o,a,n,r,i,s,c;return s=t.split(";"),r=s[0],a=s[1],o=s[2],o=s[3],o=s[4],c=e.split(";"),i=c[0],n=c[1],o=c[2],o=c[3],o=c[4],r=r.toAscii().toLowerCase(),a=a.toAscii().toLowerCase(),i=i.toAscii().toLowerCase(),n=n.toAscii().toLowerCase(),""===r&&""===a||""===i&&""===n||!(r===i&&a===n||r===n&&a===i)?-1:1},c=function(t,e,o){return null==o&&(o=!1),null==t.value?!1:e.datapoints.some(function(e){var a,n,r;if(t.name===e.name&&(!o||o&&t.type===e.type)&&null!=e.value){if("tel"===t.name)return t.value.replace(/[-\s]/g,"")===e.value.replace(/[-\s]/g,"");if("adr"===t.name){for(r=!0,a=0;r&&7>a;)r=r&&t.value[a]===e.value[a]||""===t.value[a]&&null==e.value[a]||!(null!=(n=t.value)?n[a]:void 0)&&""===e.value[a],a++;return r}return t.value===e.value}return!1})},i=function(t,e){return t=t||[],e=e||[],t.concat(e.filter(function(e){return t.indexOf(e)<0}))},r=function(t,e){var o,a;for(o in e)a=e[o],null!=a&&(t[o]=a);return t}}),require.register("lib/contact_helper",function(t,e,o){var a,n,r=[].slice;o.exports=a={},a.nToFN=function(t){var e,o,a,n,r,i;return t=t||[],e=t[0],o=t[1],a=t[2],r=t[3],i=t[4],n=[r,o,a,e,i],n=n.filter(function(t){return null!=t&&""!==t}),n.join(" ")},a.fnToN=function(t){return t=t||"",["",t,"","",""]},a.fnToNLastnameNFirstname=function(t){var e,o,a,n,i,s;return t=t||"",s=t.split(" "),o=s[0],n=3<=s.length?r.call(s,1,a=s.length-1):(a=1,[]),e=s[a++],i=[e,o,n.join(" "),"",""]},n=function(t){return t=t.filter(function(t){return null!=t&&""!==t}),t.join(", ")},a.adrArrayToString=function(t){var e,o,a;return t=t||[],a=n(t.slice(0,3)),e=n(t.slice(3,7)),o=a,""!==e&&(o+="\n"+e),o},a.adrCompleteStreet=function(t){return t=t||[],n(t.slice(0,3))},a.adrStringToArray=function(t){return t=t||"",["","",t,"","","",""]},a.imgUrl2DataUrl=function(t,e){var o;return o=new Image,o.onload=function(){var t,a,n,r,i,s;return t=600,s=o.width>o.height?"height":"width",i=t/o[s],a=document.createElement("canvas"),a.height=a.width=t,n=a.getContext("2d"),n.drawImage(o,0,0,i*o.width,i*o.height),r=a.toDataURL("image/jpeg"),e(null,r)},o.src=t},a.getAccount=function(t,e,o){var a;return null==t.accounts?null:(a=t.accounts.filter(function(t){return t.type===e&&t.name===o}),a.length>0?a[0]:null)},a.setAccount=function(t,e){var o,n,r,i;if(o=a.getAccount(t,e.type,e.name),null!=o){r=[];for(n in e)i=e[n],r.push(o[n]=i);return r}return t.accounts=t.accounts||[],t.accounts.push(e)},a.deleteAccount=function(t,e){var o,a,n,r,i;for(i=t.accounts,a=n=0,r=i.length;r>n;a=++n)if(o=i[a],o.type===e.type&&o.name===e.name)return contacts.accounts.splice(a,1),!0;return!1},a.hasAccount=function(t,e,o){return null!=a.getAccount(t,e,o)},a.intrinsicRev=function(t){var e,o,n,r,i,s;for(n=["fn","n","org","title","bday","nickname","url","note"],e="",r=0,i=n.length;i>r;r++)o=n[r],o in t&&null!=t[o]&&""!==t[o]&&(e+=o,e+=": ",e+=t[o],e+=", ");return s=t.datapoints.map(function(t){var e,o;return o="name:"+t.name+", type:"+t.type+", value: ",o+="adr"===t.name?a.adrArrayToString(t.value):"tel"===t.name?null!=(e=t.value)?e.replace(/[^\d+]/g,""):void 0:t.value}),s.sort(),e+="datapoints: "+s.join(", ")},a.getNonEmptyDatapoints=function(t){return t.filter(function(t){return!_.isEmpty(t.get("value"))})}}),require.register("lib/contacts_listener",function(t,e,o){var a,n,r=function(t,e){function o(){this.constructor=t}for(var a in e)i.call(e,a)&&(t[a]=e[a]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;a=e("models/contact"),o.exports=n=function(t){function e(){this._bulk=_.debounce(this._bulk,1e3),e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.models={contact:a},e.prototype.queues={create:[],update:[],"delete":[]},e.prototype.events=["contact.create","contact.update","contact.delete"],e.prototype._bulk=function(t){var e,o;switch(t){case"delete":e="remove",o={};break;default:e="add",o={merge:!0}}return this.collection[e](this.queues[t],o),this.queues[t].length=0},e.prototype.onRemoteCreate=function(t){return this.queues.create.push(t),this._bulk("create")},e.prototype.onRemoteUpdate=function(t){return this.queues.update.push(t),this._bulk("update")},e.prototype.onRemoteDelete=function(t){return this.queues["delete"].push(t),this._bulk("delete")},e}(CozySocketListener)}),require.register("lib/i18n",function(t,e,o){var a;a=function(){var t,o,a,n,r;a=document.documentElement.getAttribute("lang");try{n=e("locales/"+a)}catch(o){t=o,n=e("locales/en")}return r=new Polyglot({phrases:n,locale:a}),r.t.bind(r)},o.exports=a()}),require.register("lib/intent_manager",function(t,e,o){var a,n;n=3e3,o.exports=a=function(){function t(){this.talker=new Talker(window.parent,"*")}return t.prototype.send=function(t,e,o){return this.talker.timeout=o?o:n,this.talker.send("nameSpace",e)},t}()}),require.register("lib/regions/dialogs",function(t,e,o){var a,n=function(t,e){function o(){this.constructor=t}for(var a in e)r.call(e,a)&&(t[a]=e[a]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},r={}.hasOwnProperty;o.exports=a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.toggleDialogs=function(t){return null==t&&(t="true"!==this.$el.attr("aria-hidden")),this.$el.attr("aria-hidden",!t)},e.prototype.onShow=function(){return this.toggleDialogs(!0)},e.prototype.onBeforeEmpty=function(){return this.toggleDialogs(!1)},e}(Mn.Region)}),require.register("lib/tags_listener",function(t,e,o){var a,n,r=function(t,e){function o(){this.constructor=t}for(var a in e)i.call(e,a)&&(t[a]=e[a]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;a=e("models/tag"),o.exports=n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.models={tag:a},e.prototype.events=["tag.create","tag.update","tag.delete"],e.prototype.onRemoteCreate=function(t){return this.collection.add(t,{merge:!0})},e.prototype.onRemoteUpdate=function(t){return this.collection.add(t,{merge:!0})},e.prototype.onRemoteDelete=function(t){return this.collection.remove(t)},e}(CozySocketListener)}),require.register("lib/views/confirm",function(t,e,o){var a,n=function(t,e){function o(){this.constructor=t}for(var a in e)r.call(e,a)&&(t[a]=e[a]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},r={}.hasOwnProperty;o.exports=a=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.template=e("./templates/confirm"),o.prototype.tagName="section",o.prototype.attributes={role:"alertdialog","aria-busy":!1},o.prototype.ui={btn_ok:"button.ok",btn_cancel:"button.cancel"},o.prototype.triggers={"click @ui.btn_ok":"confirm:true","click @ui.btn_cancel":"confirm:false","click button":"confirm:close"},o.prototype.onDomRefresh=function(){return setTimeout(function(t){return function(){return t.$el.attr("aria-busy",!0)}}(this),50)},o.prototype.onConfirmClose=function(){var t;return t=e("application").layout,t.alerts.empty()},o}(Mn.ItemView)}),require.register("lib/views/templates/base/alert",function(t,e,o){var a=function(t){var e=[];return e.push('<div class="wrapper"><div role="contentinfo"></div></div>'),e.join("")};"function"==typeof define&&define.amd?define([],function(){return a}):"object"==typeof o&&o&&o.exports&&(o.exports=a)}),require.register("lib/views/templates/base/dialog",function(t,e,o){var a=function(t){var e=[];return e.push('<div role="separator"></div><div class="wrapper"><div role="contentinfo"></div></div>'),e.join("")};"function"==typeof define&&define.amd?define([],function(){return a}):"object"==typeof o&&o&&o.exports&&(o.exports=a)}),require.register("lib/views/templates/confirm",function(t,e,o){var a=function(t){var e,o=[],a=t||{};return function(t,a,n,r){o.push('<div role="separator"></div><div class="wrapper"><div role="contentinfo"><h2>'+jade.escape(null==(e=r)?"":e)+"</h2><p>"+jade.escape(null==(e=n)?"":e)+'</p><nav><ul class="actions"><li><button class="ok">'+jade.escape(null==(e=a)?"":e)+'</button></li><li><button class="secondary cancel">'+jade.escape(null==(e=t)?"":e)+"</button></li></ul></nav></div></div>")}.call(this,"btn_cancel"in a?a.btn_cancel:"undefined"!=typeof btn_cancel?btn_cancel:void 0,"btn_ok"in a?a.btn_ok:"undefined"!=typeof btn_ok?btn_ok:void 0,"message"in a?a.message:"undefined"!=typeof message?message:void 0,"title"in a?a.title:"undefined"!=typeof title?title:void 0),o.join("")};"function"==typeof define&&define.amd?define([],function(){return a}):"object"==typeof o&&o&&o.exports&&(o.exports=a)}),require.register("locales/de",function(t,e,o){o.exports={"list counter":"%{smart_count} contact |||| %{smart_count} contacts","list counter no-search":"no contact matches your criteria","list counter empty":"no contact at this time","tools subactions settings":"Einstellungen","tools actions add contact":"Neuer Kontakt","tools actions find duplicates":"find duplicates","tools search placeholder":"Kontakte suchen","tools labels filters":"labels","tools labels filters all":"Alle Kontakte","tools contextual selected":"%{smart_count} contact selected |||| %{smart_count} contacts selected","tools contextual select all":"Alle Auswählen","tools contextual select none":"Keine Auswählen","tools contextual merge":"Zusammenfügen","tools contextual export":"Exportieren","tools contextual delete":"Löschen","bulk confirm delete title":"Delete contact |||| Delete contacts","bulk confirm delete message":"You'll delete a contact. Are you sure? |||| You'll delete %{smart_count} contacts. Are you sure?","bulk confirm delete ok":"Löschen","bulk confirm delete cancel":"keep 'em safe","settings title":"Einstellungen","settings in-out title":"import/export contacts","settings in-out import action":"vcard Importieren","settings in-out export action":"vcard Exportieren","settings in-out import result":"You've just successfully imported %{smart_count} contact. |||| You've just successfully imported %{smart_count} contacts.","settings display title":"Einstellungen anzeigen","settings display sort gn":"Sortieren nach Nachnamen","settings display sort fn":"Sortieren nach Vornamen","settings sync title":"mobile synchronization","settings sync gplay":"Access all your Cozy directly on your mobile device. Download our app now on the Google Play Store:","settings sync gplay get it":"Get it on Google play","settings sync carddav":"Looking for more information about the synchronization using CardDav? Take a look at [our documentation](%{link}).","card actions create":"Erstellen","card actions save":"Speichern","card actions labels":"labels","card actions labels add":"add label","card actions labels create":"create label","card actions cancel":"Abbrechen","card actions edit":"edit","card actions delete":"Löschen","card actions export":"Exportieren","card actions add select":"add field","card actions add birthday":"birthday","card actions add social":"social media","card actions add link":"url","card actions add other":"other information","card confirm delete title":"%{name} löschen?","card confirm delete message":"You'll remove %{name} from your contacts. Are you sure?","card confirm delete ok":"Kontakt löschen","card confirm delete cancel":"Keep it","card confirm cancel title":"Are you sure you want to leave?","card confirm cancel message":"Your contact hasn't been saved.","card confirm cancel ok":"Leave","card confirm cancel cancel":"Stay on Edit Mode","datapoints section tel":"Phone numbers","datapoints section email":"Email addresses","datapoints section adr":"Postal addresses","datapoints section xtras":"Additional informations","datapoint label name prefix":"prefix","datapoint label name first":"Vorname","datapoint label name middle":"middle name","datapoint label name given":"last name",
"datapoint label name suffix":"suffix","datapoint label org":"company","datapoint placeholder org":"add company name","datapoint label department":"department","datapoint placeholder department":"add department","datapoint label title":"title","datapoint placeholder title":"add title","datapoint placeholder tel":"add phone number","datapoint placeholder email":"add email address","datapoint placeholder adr":"add address","datapoint placeholder social":"add social media nickname","datapoint placeholder im":"add social media nickname","datapoint placeholder chat":"add social media nickname","datapoint placeholder url":"add an url","datapoint placeholder other":"add any information","datapoint label bday":"birthday","datapoint placeholder bday":"YYYY-MM-DD","datapoint label note":"notes","duplicates title":"Find Duplicates","duplicates actions mergeall":"merge all","duplicates empty":"No duplicates found","mergerow actions merge":"Zusammenfügen","mergerow actions dismiss":"dismiss","merge title":"Merge contacts","merge choose avatar":"Choose a profile picture:","merge choose name":"Choose a name:","merge choose nickname":"Choose a nickname:","merge choose organisation":"Choose an organisation:","merge choose org":"company","merge choose department":"department","merge choose title":"title","merge choose birthday":"Choose a birthday:","merge actions merge":"merge contacts","merge actions cancel":"Abbrechen","error upload wrong filetype":"The uploaded file isn't a valid VCF/VCard format. Please try with another file."}}),require.register("locales/en",function(t,e,o){o.exports={"list counter":"%{smart_count} contact |||| %{smart_count} contacts","list counter no-search":"no contact matches your criteria","list counter empty":"no contact at this time","tools subactions settings":"settings","tools actions add contact":"add contact","tools actions find duplicates":"find duplicates","tools search placeholder":"search for contacts","tools labels filters":"labels","tools labels filters all":"all contacts","tools contextual selected":"%{smart_count} contact selected |||| %{smart_count} contacts selected","tools contextual select all":"select all","tools contextual select none":"select none","tools contextual merge":"merge","tools contextual export":"export","tools contextual delete":"delete","bulk confirm delete title":"Delete contact |||| Delete contacts","bulk confirm delete message":"You'll delete a contact. Are you sure? |||| You'll delete %{smart_count} contacts. Are you sure?","bulk confirm delete ok":"delete","bulk confirm delete cancel":"keep 'em safe","settings title":"settings","settings in-out title":"import/export contacts","settings in-out import action":"import vcard","settings in-out export action":"export vcard","settings in-out import result":"You've just successfully imported %{smart_count} contact. |||| You've just successfully imported %{smart_count} contacts.","settings display title":"display settings","settings display sort gn":"sort by last name","settings display sort fn":"sort by first name","settings sync title":"mobile synchronization","settings sync gplay":"Access all your Cozy directly on your mobile device. Download our app now on the Google Play Store:","settings sync gplay get it":"Get it on Google play","settings sync carddav":"Looking for more information about the synchronization using CardDav? Take a look at [our documentation](%{link}).","card actions create":"create","card actions save":"save","card actions labels":"labels","card actions labels add":"add label","card actions labels create":"create label","card actions cancel":"cancel","card actions edit":"edit","card actions delete":"delete","card actions export":"export","card actions add select":"add field","card actions add birthday":"birthday","card actions add social":"social media","card actions add link":"url","card actions add other":"other information","card confirm delete title":"Remove %{name}?","card confirm delete message":"You'll remove %{name} from your contacts. Are you sure?","card confirm delete ok":"Delete Contact","card confirm delete cancel":"Keep it","card confirm cancel title":"Are you sure you want to leave?","card confirm cancel message":"Your contact hasn't been saved.","card confirm cancel ok":"Leave","card confirm cancel cancel":"Stay on Edit Mode","datapoints section tel":"Phone numbers","datapoints section email":"Email addresses","datapoints section adr":"Postal addresses","datapoints section xtras":"Additional informations","datapoint label name prefix":"prefix","datapoint label name first":"first name","datapoint label name middle":"middle name","datapoint label name given":"last name","datapoint label name suffix":"suffix","datapoint label org":"company","datapoint placeholder org":"add company name","datapoint label department":"department","datapoint placeholder department":"add department","datapoint label title":"title","datapoint placeholder title":"add title","datapoint placeholder tel":"add phone number","datapoint placeholder email":"add email address","datapoint placeholder adr":"add address","datapoint placeholder social":"add social media nickname","datapoint placeholder im":"add social media nickname","datapoint placeholder chat":"add social media nickname","datapoint placeholder url":"add an url","datapoint placeholder other":"add any information","datapoint label bday":"birthday","datapoint placeholder bday":"YYYY-MM-DD","datapoint label note":"notes","duplicates title":"Find Duplicates","duplicates actions mergeall":"merge all","duplicates empty":"No duplicates found","mergerow actions merge":"merge","mergerow actions dismiss":"dismiss","merge title":"Merge contacts","merge choose avatar":"Choose a profile picture:","merge choose name":"Choose a name:","merge choose nickname":"Choose a nickname:","merge choose organisation":"Choose an organisation:","merge choose org":"company","merge choose department":"department","merge choose title":"title","merge choose birthday":"Choose a birthday:","merge actions merge":"merge contacts","merge actions cancel":"cancel","error upload wrong filetype":"The uploaded file isn't a valid VCF/VCard format. Please try with another file."}}),require.register("locales/eo",function(t,e,o){o.exports={"list counter":"%{smart_count} contact |||| %{smart_count} contacts","list counter no-search":"no contact matches your criteria","list counter empty":"no contact at this time","tools subactions settings":"settings","tools actions add contact":"add contact","tools actions find duplicates":"find duplicates","tools search placeholder":"search for contacts","tools labels filters":"labels","tools labels filters all":"all contacts","tools contextual selected":"%{smart_count} contact selected |||| %{smart_count} contacts selected","tools contextual select all":"select all","tools contextual select none":"select none","tools contextual merge":"merge","tools contextual export":"export","tools contextual delete":"delete","bulk confirm delete title":"Delete contact |||| Delete contacts","bulk confirm delete message":"You'll delete a contact. Are you sure? |||| You'll delete %{smart_count} contacts. Are you sure?","bulk confirm delete ok":"delete","bulk confirm delete cancel":"keep 'em safe","settings title":"settings","settings in-out title":"import/export contacts","settings in-out import action":"import vcard","settings in-out export action":"export vcard","settings in-out import result":"You've just successfully imported %{smart_count} contact. |||| You've just successfully imported %{smart_count} contacts.","settings display title":"display settings","settings display sort gn":"sort by last name","settings display sort fn":"sort by first name","settings sync title":"mobile synchronization","settings sync gplay":"Access all your Cozy directly on your mobile device. Download our app now on the Google Play Store:","settings sync gplay get it":"Get it on Google play","settings sync carddav":"Looking for more information about the synchronization using CardDav? Take a look at [our documentation](%{link}).","card actions create":"create","card actions save":"save","card actions labels":"labels","card actions labels add":"add label","card actions labels create":"create label","card actions cancel":"cancel","card actions edit":"edit","card actions delete":"delete","card actions export":"export","card actions add select":"add field","card actions add birthday":"birthday","card actions add social":"social media","card actions add link":"url","card actions add other":"other information","card confirm delete title":"Remove %{name}?","card confirm delete message":"You'll remove %{name} from your contacts. Are you sure?","card confirm delete ok":"Delete Contact","card confirm delete cancel":"Keep it","card confirm cancel title":"Are you sure you want to leave?","card confirm cancel message":"Your contact hasn't been saved.","card confirm cancel ok":"Leave","card confirm cancel cancel":"Stay on Edit Mode","datapoints section tel":"Phone numbers","datapoints section email":"Email addresses","datapoints section adr":"Postal addresses","datapoints section xtras":"Additional informations","datapoint label name prefix":"prefix","datapoint label name first":"first name","datapoint label name middle":"middle name","datapoint label name given":"last name","datapoint label name suffix":"suffix","datapoint label org":"company","datapoint placeholder org":"add company name","datapoint label department":"department","datapoint placeholder department":"add department","datapoint label title":"title","datapoint placeholder title":"add title","datapoint placeholder tel":"add phone number","datapoint placeholder email":"add email address","datapoint placeholder adr":"add address","datapoint placeholder social":"add social media nickname","datapoint placeholder im":"add social media nickname","datapoint placeholder chat":"add social media nickname","datapoint placeholder url":"add an url","datapoint placeholder other":"add any information","datapoint label bday":"birthday","datapoint placeholder bday":"YYYY-MM-DD","datapoint label note":"notes","duplicates title":"Find Duplicates","duplicates actions mergeall":"merge all","duplicates empty":"No duplicates found","mergerow actions merge":"merge","mergerow actions dismiss":"dismiss","merge title":"Merge contacts","merge choose avatar":"Choose a profile picture:","merge choose name":"Choose a name:","merge choose nickname":"Choose a nickname:","merge choose organisation":"Choose an organisation:","merge choose org":"company","merge choose department":"department","merge choose title":"title","merge choose birthday":"Choose a birthday:","merge actions merge":"merge contacts","merge actions cancel":"cancel","error upload wrong filetype":"The uploaded file isn't a valid VCF/VCard format. Please try with another file."}}),require.register("locales/es",function(t,e,o){o.exports={"list counter":"%{smart_count} contacto |||| %{smart_count} contactos","list counter no-search":"ningún contacto corresponde a sus criterios","list counter empty":"ningún contacto en este momento","tools subactions settings":"parámetros","tools actions add contact":"añadir contacto","tools actions find duplicates":"encontrar duplicados","tools search placeholder":"busqueda de contactos","tools labels filters":"etiquetas","tools labels filters all":"todos los contactos","tools contextual selected":"%{smart_count} contacto seleccionado |||| %{smart_count} contactos seleccionados","tools contextual select all":"seleccionar todos","tools contextual select none":"no seleccionar ninguno","tools contextual merge":"fusionar","tools contextual export":"exportar","tools contextual delete":"suprimir","bulk confirm delete title":" Suprimir el contacto |||| Suprimir los contactos","bulk confirm delete message":"Usted va a suprimir un contacto. ¿Está seguro? |||| Usted va a suprimir %{smart_count} contactos. ¿Está seguro?","bulk confirm delete ok":"Suprimir","bulk confirm delete cancel":"mantenerlos en lugar seguro","settings title":"parámetros","settings in-out title":"importar/exportar contactos","settings in-out import action":"importar vcard","settings in-out export action":"exportar vcard","settings in-out import result":"contactos.Usted acaba de importar exitosamente %{smart_count} contacto. |||| Usted acaba de importar exitosamente  %{smart_count} ","settings display title":"visualizar parámetros","settings display sort gn":"ordenar por apellido","settings display sort fn":"ordenar por nombre","settings sync title":"sincronización de su móvil","settings sync gplay":"Acceda a su Cozy directamente desde su perférico móvil. Ahora puede descargar nuestra aplicación en el Google Play Store:","settings sync gplay get it":"Consígala en Google Play","settings sync carddav":"¿Quisiera usted tener mayores informes sobre la sincronización con CardDav? Echele una mirada a [nuestra documentación] (%{link}).","card actions create":"crear","card actions save":"guardar","card actions labels":"etiquetas","card actions labels add":"añadir una etiqueta","card actions labels create":"crear una etiqueta","card actions cancel":"anular","card actions edit":"editar","card actions delete":"suprimir","card actions export":"exportar","card actions add select":"añadir campo","card actions add birthday":"cumpleaños","card actions add social":"redes sociales","card actions add link":"url","card actions add other":"información adicional","card confirm delete title":"Suprimir %{name}?","card confirm delete message":"¿Desea usted remover %{name} de sus contactos? ¿Está seguro?","card confirm delete ok":"Suprimir Contacto","card confirm delete cancel":"Guardarlo","card confirm cancel title":"¿Está usted seguro de abandonar?","card confirm cancel message":"Su contacto no ha sido guardado.","card confirm cancel ok":"Abandonar","card confirm cancel cancel":"Permanecer en Modo Edición","datapoints section tel":"Números de teléfono","datapoints section email":"Direcciones email","datapoints section adr":"Direcciones postales","datapoints section xtras":"Datos adicionales","datapoint label name prefix":"prefijo","datapoint label name first":"nombre","datapoint label name middle":"segundo nombre","datapoint label name given":"apellido","datapoint label name suffix":"sufijo","datapoint label org":"empresa","datapoint placeholder org":"añadir nombre de empresa","datapoint label department":"departamento","datapoint placeholder department":"añadir departamento","datapoint label title":"título","datapoint placeholder title":"añadir título","datapoint placeholder tel":"añadir número de teléfono","datapoint placeholder email":"añadir dirección email","datapoint placeholder adr":"añadir una dirección","datapoint placeholder social":"añadir alias de redes sociales","datapoint placeholder im":"añadir alias para redes sociales","datapoint placeholder chat":"añadir alias para redes sociales","datapoint placeholder url":"añadir una url","datapoint placeholder other":"añadir un dato","datapoint label bday":"cumpleaños","datapoint placeholder bday":"AAAA-MM-DD","datapoint label note":"notas","duplicates title":"Encontrar duplicados","duplicates actions mergeall":"fusionar todas","duplicates empty":"No se han encontrado duplicados","mergerow actions merge":"fusionar","mergerow actions dismiss":"descartar","merge title":"Fusionar contactos","merge choose avatar":"Escoger una imagen para el perfil:","merge choose name":"Escoger un nombre:","merge choose nickname":"Escogr un alias:","merge choose organisation":"escoger una organización:Escoger una organización:","merge choose org":"empresa","merge choose department":"departamento","merge choose title":"título","merge choose birthday":"Escoger un cumpleaños:","merge actions merge":"combinar contactos","merge actions cancel":"anular","error upload wrong filetype":"El archivo descargado no tiene un formato VCF/VCard válido. Ensaye con otro archivo."}}),require.register("locales/fr",function(t,e,o){o.exports={"list counter":"%{smart_count} contact |||| %{smart_count} contacts","list counter no-search":"aucun contact ne correspond à votre recherche","list counter empty":"aucun contact disponible","tools subactions settings":"configuration","tools actions add contact":"ajouter un contact","tools actions find duplicates":"doublons","tools search placeholder":"rechercher des contacts","tools labels filters":"libellés","tools labels filters all":"tous les contacts","tools contextual selected":"%{smart_count} contact sélectionné |||| %{smart_count} contacts sélectionnés","tools contextual select all":"tout sélectionner","tools contextual select none":"tout désélectionner","tools contextual merge":"fusionner","tools contextual export":"exporter","tools contextual delete":"supprimer","bulk confirm delete title":"Supprimer le contact |||| Supprimer les contacts","bulk confirm delete message":"Vous allez supprimer un contact. Le voulez-vous vraiment ? |||| Vous aller supprimer %{smart_count} contacts. Le voulez-vous vraiment ? ","bulk confirm delete ok":"Supprimer","bulk confirm delete cancel":"Conserver","settings title":"configuration","settings in-out title":"importer / exporter les contacts","settings in-out import action":"importer un fichier vcard","settings in-out export action":"exporter vos contacts","settings in-out import result":"Vous avez importé %{smart_count} contact. |||| Vous avez importé %{smart_count} contacts.","settings display title":"affichage","settings display sort gn":"trier par nom","settings display sort fn":"trier par prénom","settings sync title":"synchronisation mobile","settings sync gplay":"Accédez à votre Cozy depuis votre mobile. Télécharger notre application sur le Google Play Store :","settings sync gplay get it":"Disponible sur Google Play","settings sync carddav":"Besoin de synchronisation CardDav ? Jetez un œil à [notre documentation](%{link}).","card actions create":"créer","card actions save":"enregistrer","card actions labels":"libellés","card actions labels add":"ajouter un libellé","card actions labels create":"créer un libellé","card actions cancel":"annuler","card actions edit":"modifier","card actions delete":"supprimer","card actions export":"exporter","card actions add select":"ajouter un champ","card actions add birthday":"date de naissance","card actions add social":"réseau social","card actions add link":"lien","card actions add other":"autre","card confirm delete title":"Supprimer %{name} ?","card confirm delete message":"Vous allez supprimer %{name} de vos contacts. Le voulez-vous vraiment ?","card confirm delete ok":"Le supprimer","card confirm delete cancel":"Le garder","card confirm cancel title":"Voulez-vous vraiment quitter l'édition ?","card confirm cancel message":"Vos modifications n'ont pas été sauvées.","card confirm cancel ok":"Quitter","card confirm cancel cancel":"Rester","datapoints section tel":"Numéros de téléphone","datapoints section email":"Adresses email","datapoints section adr":"Adresses postales","datapoints section xtras":"Informations complémentaires","datapoint label name prefix":"civilité","datapoint label name first":"prénom","datapoint label name middle":"surnom","datapoint label name given":"nom","datapoint label name suffix":"particule","datapoint label org":"société","datapoint placeholder org":"ajouter une société","datapoint label department":"département","datapoint placeholder department":"ajouter un département","datapoint label title":"poste","datapoint placeholder title":"ajouter un poste","datapoint placeholder tel":"ajouter un numéro de téléphone","datapoint placeholder email":"ajouter une adresse email","datapoint placeholder adr":"ajouter une adresse","datapoint placeholder social":"ajouter un nom d'utilisateur","datapoint placeholder im":"ajouter un nom d'utilisateur","datapoint placeholder chat":"ajouter un nom d'utilisateur","datapoint placeholder url":"ajouter une url","datapoint placeholder other":"ajouter une information","datapoint label bday":"anniversaire","datapoint placeholder bday":"YYYY-MM-DD","datapoint label note":"notes","duplicates title":"Doublons","duplicates actions mergeall":"tout fusionner","duplicates empty":"Aucun doublon détecté","mergerow actions merge":"fusionner","mergerow actions dismiss":"abandonner","merge title":"Fusionner les contacts","merge choose avatar":"Choisissez une photo de profil :","merge choose name":"Choisissez un nom :","merge choose nickname":"Choisissez un surnom :","merge choose organisation":"Choisissez une organisation:","merge choose org":"société","merge choose department":"département","merge choose title":"poste","merge choose birthday":"Choisissez un anniversaire :","merge actions merge":"fusionner","merge actions cancel":"annuler","error upload wrong filetype":"Le fichier sélectionné n'est pas un format VCard/VCF valide. Essayez avec un autre fichier."}}),require.register("locales/it",function(t,e,o){o.exports={"list counter":"%{smart_count} contact |||| %{smart_count} contacts","list counter no-search":"no contact matches your criteria","list counter empty":"no contact at this time","tools subactions settings":"settings","tools actions add contact":"add contact","tools actions find duplicates":"find duplicates","tools search placeholder":"search for contacts","tools labels filters":"labels","tools labels filters all":"all contacts","tools contextual selected":"%{smart_count} contact selected |||| %{smart_count} contacts selected","tools contextual select all":"select all","tools contextual select none":"select none","tools contextual merge":"merge","tools contextual export":"export","tools contextual delete":"delete","bulk confirm delete title":"Delete contact |||| Delete contacts","bulk confirm delete message":"You'll delete a contact. Are you sure? |||| You'll delete %{smart_count} contacts. Are you sure?","bulk confirm delete ok":"delete","bulk confirm delete cancel":"keep 'em safe","settings title":"settings","settings in-out title":"import/export contacts","settings in-out import action":"import vcard","settings in-out export action":"export vcard","settings in-out import result":"You've just successfully imported %{smart_count} contact. |||| You've just successfully imported %{smart_count} contacts.","settings display title":"display settings","settings display sort gn":"sort by last name","settings display sort fn":"sort by first name","settings sync title":"mobile synchronization","settings sync gplay":"Access all your Cozy directly on your mobile device. Download our app now on the Google Play Store:","settings sync gplay get it":"Get it on Google play","settings sync carddav":"Looking for more information about the synchronization using CardDav? Take a look at [our documentation](%{link}).","card actions create":"create","card actions save":"save","card actions labels":"labels","card actions labels add":"add label","card actions labels create":"create label","card actions cancel":"cancel","card actions edit":"edit","card actions delete":"delete","card actions export":"export","card actions add select":"add field","card actions add birthday":"birthday","card actions add social":"social media","card actions add link":"url","card actions add other":"other information","card confirm delete title":"Remove %{name}?","card confirm delete message":"You'll remove %{name} from your contacts. Are you sure?","card confirm delete ok":"Delete Contact","card confirm delete cancel":"Keep it","card confirm cancel title":"Are you sure you want to leave?","card confirm cancel message":"Your contact hasn't been saved.","card confirm cancel ok":"Leave","card confirm cancel cancel":"Stay on Edit Mode","datapoints section tel":"Phone numbers","datapoints section email":"Email addresses","datapoints section adr":"Postal addresses","datapoints section xtras":"Additional informations","datapoint label name prefix":"prefix","datapoint label name first":"first name","datapoint label name middle":"middle name","datapoint label name given":"last name","datapoint label name suffix":"suffix","datapoint label org":"company","datapoint placeholder org":"add company name","datapoint label department":"department","datapoint placeholder department":"add department","datapoint label title":"title","datapoint placeholder title":"add title","datapoint placeholder tel":"add phone number","datapoint placeholder email":"add email address","datapoint placeholder adr":"add address","datapoint placeholder social":"add social media nickname","datapoint placeholder im":"add social media nickname","datapoint placeholder chat":"add social media nickname","datapoint placeholder url":"add an url","datapoint placeholder other":"add any information","datapoint label bday":"birthday","datapoint placeholder bday":"YYYY-MM-DD","datapoint label note":"notes","duplicates title":"Find Duplicates","duplicates actions mergeall":"merge all","duplicates empty":"No duplicates found","mergerow actions merge":"merge","mergerow actions dismiss":"dismiss","merge title":"Merge contacts","merge choose avatar":"Choose a profile picture:","merge choose name":"Choose a name:","merge choose nickname":"Choose a nickname:","merge choose organisation":"Choose an organisation:","merge choose org":"company","merge choose department":"department","merge choose title":"title","merge choose birthday":"Choose a birthday:","merge actions merge":"merge contacts","merge actions cancel":"cancel","error upload wrong filetype":"The uploaded file isn't a valid VCF/VCard format. Please try with another file."}}),require.register("locales/ko",function(t,e,o){o.exports={"list counter":"%{smart_count}개의 연락처 |||| %{smart_count}개의 연락처","list counter no-search":"일치하는 연락처가 없습니다","list counter empty":"등록된 연락처가 없습니다","tools subactions settings":"설정","tools actions add contact":"연락처 추가","tools actions find duplicates":"중복검색","tools search placeholder":"연락처 검색","tools labels filters":"태그 목록","tools labels filters all":"모든 연락처","tools contextual selected":"%{smart_count} 개의 연락처 선택됨 |||| %{smart_count} 개의 연락처 선택됨","tools contextual select all":"전체 선택","tools contextual select none":"전체 해제","tools contextual merge":"합치기","tools contextual export":"내보내기","tools contextual delete":"삭제","bulk confirm delete title":"연락처 삭제 |||| 연락처 삭제","bulk confirm delete message":"연락처를 삭제 하시겠습니까? |||| %{smart_count} 개의 연락처를 삭제 하시겠습니까?","bulk confirm delete ok":"삭제","bulk confirm delete cancel":"안전하게 보관함","settings title":"설정","settings in-out title":"연락처 가져오기/내보내기","settings in-out import action":"VCARD 가져오기","settings in-out export action":"VCARD 내보내기","settings in-out import result":"%{smart_count} 개의 연락처 가져오기를 성공했습니다. ||||%{smart_count} 개의 연락처 가져오기를 성공했습니다.","settings display title":"설정 표시","settings display sort gn":"성으로 정렬","settings display sort fn":"이름으로 정렬","settings sync title":"모바일 동기화","settings sync gplay":"모바일 기기로 접속하여 연락처를 공유 할 수 있습니다. 구글 플레이 스토어에서 다운로드 받을 수 있습니다.","settings sync gplay get it":"구글 플레이에서 가져오기","settings sync carddav":"CardDav 사용하여 동기화 하는 방법에 대해 더 자세히 알려면, 링크 내용을 참고 하세요.(%{link}).","card actions create":"생성","card actions save":"저장","card actions labels":"태그","card actions labels add":"태그 추가","card actions labels create":"태그 생성","card actions cancel":"취소","card actions edit":"수정","card actions delete":"삭제","card actions export":"내보내기","card actions add select":"필드 추가","card actions add birthday":"생년월일","card actions add social":"소셜미디어","card actions add link":"인터넷 주소","card actions add other":"추가 정보","card confirm delete title":"%{name}를 삭제 하시겠습니까?","card confirm delete message":"정말로 연락처에서 %{name}을 삭제 하시겠습니까?","card confirm delete ok":"연락처 삭제","card confirm delete cancel":"유지","card confirm cancel title":"페이지를 나가시겠습니까?","card confirm cancel message":"연락처 목록이 저장 되지 않았습니다.","card confirm cancel ok":"떠나기","card confirm cancel cancel":"수정 모드에 머무르기","datapoints section tel":"전화번호","datapoints section email":"이메일 주소","datapoints section adr":"우편번호","datapoints section xtras":"추가 정보","datapoint label name prefix":"접두사","datapoint label name first":"이름","datapoint label name middle":"중간이름","datapoint label name given":"성","datapoint label name suffix":"접미사","datapoint label org":"회사","datapoint placeholder org":"회사명 추가","datapoint label department":"부서","datapoint placeholder department":"부서 추가","datapoint label title":"제목","datapoint placeholder title":"제목 추가","datapoint placeholder tel":"전화번호 추가","datapoint placeholder email":"이메일 추가","datapoint placeholder adr":"주소 추가","datapoint placeholder social":"소셜미디어 별명 추가","datapoint placeholder im":"소셜미디어 별명 추가","datapoint placeholder chat":"소셜미디어 별명 추가","datapoint placeholder url":"URL 추가","datapoint placeholder other":"추가 정보 추가","datapoint label bday":"생년월일","datapoint placeholder bday":"YYYY-MM-DD","datapoint label note":"메모","duplicates title":"중복 검색","duplicates actions mergeall":"전체 합치기","duplicates empty":"중복된 연락처 없음","mergerow actions merge":"합치기","mergerow actions dismiss":"해제","merge title":"연락처 합치기","merge choose avatar":"프로파일 사진 선택","merge choose name":"이름 선택","merge choose nickname":"별명 선택","merge choose organisation":"조직 선택","merge choose org":"회사명","merge choose department":"부서명","merge choose title":"제목","merge choose birthday":"생년월일 선택","merge actions merge":"연락처 합치기","merge actions cancel":"취소","error upload wrong filetype":"VCF/VCard 형식이 올바르지 않습니다. 다른 파일을 이용해 주세요."}}),require.register("locales/pl",function(t,e,o){o.exports={"list counter":"%{smart_count} contact |||| %{smart_count} contacts","list counter no-search":"no contact matches your criteria","list counter empty":"no contact at this time","tools subactions settings":"settings","tools actions add contact":"add contact","tools actions find duplicates":"find duplicates","tools search placeholder":"search for contacts","tools labels filters":"labels","tools labels filters all":"all contacts","tools contextual selected":"%{smart_count} contact selected |||| %{smart_count} contacts selected","tools contextual select all":"select all","tools contextual select none":"select none","tools contextual merge":"merge","tools contextual export":"export","tools contextual delete":"delete","bulk confirm delete title":"Delete contact |||| Delete contacts","bulk confirm delete message":"You'll delete a contact. Are you sure? |||| You'll delete %{smart_count} contacts. Are you sure?","bulk confirm delete ok":"delete","bulk confirm delete cancel":"keep 'em safe","settings title":"settings","settings in-out title":"import/export contacts","settings in-out import action":"import vcard","settings in-out export action":"export vcard","settings in-out import result":"You've just successfully imported %{smart_count} contact. |||| You've just successfully imported %{smart_count} contacts.","settings display title":"display settings","settings display sort gn":"sort by last name","settings display sort fn":"sort by first name","settings sync title":"mobile synchronization","settings sync gplay":"Access all your Cozy directly on your mobile device. Download our app now on the Google Play Store:","settings sync gplay get it":"Get it on Google play","settings sync carddav":"Looking for more information about the synchronization using CardDav? Take a look at [our documentation](%{link}).","card actions create":"create","card actions save":"save","card actions labels":"labels","card actions labels add":"add label","card actions labels create":"create label","card actions cancel":"cancel","card actions edit":"edit","card actions delete":"delete","card actions export":"export","card actions add select":"add field","card actions add birthday":"birthday","card actions add social":"social media","card actions add link":"url","card actions add other":"other information","card confirm delete title":"Remove %{name}?","card confirm delete message":"You'll remove %{name} from your contacts. Are you sure?","card confirm delete ok":"Delete Contact","card confirm delete cancel":"Keep it","card confirm cancel title":"Are you sure you want to leave?",
"card confirm cancel message":"Your contact hasn't been saved.","card confirm cancel ok":"Leave","card confirm cancel cancel":"Stay on Edit Mode","datapoints section tel":"Phone numbers","datapoints section email":"Email addresses","datapoints section adr":"Postal addresses","datapoints section xtras":"Additional informations","datapoint label name prefix":"prefix","datapoint label name first":"first name","datapoint label name middle":"middle name","datapoint label name given":"last name","datapoint label name suffix":"suffix","datapoint label org":"company","datapoint placeholder org":"add company name","datapoint label department":"department","datapoint placeholder department":"add department","datapoint label title":"title","datapoint placeholder title":"add title","datapoint placeholder tel":"add phone number","datapoint placeholder email":"add email address","datapoint placeholder adr":"add address","datapoint placeholder social":"add social media nickname","datapoint placeholder im":"add social media nickname","datapoint placeholder chat":"add social media nickname","datapoint placeholder url":"add an url","datapoint placeholder other":"add any information","datapoint label bday":"birthday","datapoint placeholder bday":"YYYY-MM-DD","datapoint label note":"notes","duplicates title":"Find Duplicates","duplicates actions mergeall":"merge all","duplicates empty":"No duplicates found","mergerow actions merge":"merge","mergerow actions dismiss":"dismiss","merge title":"Merge contacts","merge choose avatar":"Choose a profile picture:","merge choose name":"Choose a name:","merge choose nickname":"Choose a nickname:","merge choose organisation":"Choose an organisation:","merge choose org":"company","merge choose department":"department","merge choose title":"title","merge choose birthday":"Choose a birthday:","merge actions merge":"merge contacts","merge actions cancel":"cancel","error upload wrong filetype":"The uploaded file isn't a valid VCF/VCard format. Please try with another file."}}),require.register("locales/pt_BR",function(t,e,o){o.exports={"list counter":"%{smart_count} contact |||| %{smart_count} contacts","list counter no-search":"no contact matches your criteria","list counter empty":"no contact at this time","tools subactions settings":"settings","tools actions add contact":"add contact","tools actions find duplicates":"find duplicates","tools search placeholder":"search for contacts","tools labels filters":"labels","tools labels filters all":"all contacts","tools contextual selected":"%{smart_count} contact selected |||| %{smart_count} contacts selected","tools contextual select all":"select all","tools contextual select none":"select none","tools contextual merge":"merge","tools contextual export":"export","tools contextual delete":"delete","bulk confirm delete title":"Delete contact |||| Delete contacts","bulk confirm delete message":"You'll delete a contact. Are you sure? |||| You'll delete %{smart_count} contacts. Are you sure?","bulk confirm delete ok":"delete","bulk confirm delete cancel":"keep 'em safe","settings title":"settings","settings in-out title":"import/export contacts","settings in-out import action":"import vcard","settings in-out export action":"export vcard","settings in-out import result":"You've just successfully imported %{smart_count} contact. |||| You've just successfully imported %{smart_count} contacts.","settings display title":"display settings","settings display sort gn":"sort by last name","settings display sort fn":"sort by first name","settings sync title":"mobile synchronization","settings sync gplay":"Access all your Cozy directly on your mobile device. Download our app now on the Google Play Store:","settings sync gplay get it":"Get it on Google play","settings sync carddav":"Looking for more information about the synchronization using CardDav? Take a look at [our documentation](%{link}).","card actions create":"create","card actions save":"save","card actions labels":"labels","card actions labels add":"add label","card actions labels create":"create label","card actions cancel":"cancel","card actions edit":"edit","card actions delete":"delete","card actions export":"export","card actions add select":"add field","card actions add birthday":"birthday","card actions add social":"social media","card actions add link":"url","card actions add other":"other information","card confirm delete title":"Remove %{name}?","card confirm delete message":"You'll remove %{name} from your contacts. Are you sure?","card confirm delete ok":"Delete Contact","card confirm delete cancel":"Keep it","card confirm cancel title":"Are you sure you want to leave?","card confirm cancel message":"Your contact hasn't been saved.","card confirm cancel ok":"Leave","card confirm cancel cancel":"Stay on Edit Mode","datapoints section tel":"Phone numbers","datapoints section email":"Email addresses","datapoints section adr":"Postal addresses","datapoints section xtras":"Additional informations","datapoint label name prefix":"prefix","datapoint label name first":"first name","datapoint label name middle":"middle name","datapoint label name given":"last name","datapoint label name suffix":"suffix","datapoint label org":"company","datapoint placeholder org":"add company name","datapoint label department":"department","datapoint placeholder department":"add department","datapoint label title":"title","datapoint placeholder title":"add title","datapoint placeholder tel":"add phone number","datapoint placeholder email":"add email address","datapoint placeholder adr":"add address","datapoint placeholder social":"add social media nickname","datapoint placeholder im":"add social media nickname","datapoint placeholder chat":"add social media nickname","datapoint placeholder url":"add an url","datapoint placeholder other":"add any information","datapoint label bday":"birthday","datapoint placeholder bday":"YYYY-MM-DD","datapoint label note":"notes","duplicates title":"Find Duplicates","duplicates actions mergeall":"merge all","duplicates empty":"No duplicates found","mergerow actions merge":"merge","mergerow actions dismiss":"dismiss","merge title":"Merge contacts","merge choose avatar":"Choose a profile picture:","merge choose name":"Choose a name:","merge choose nickname":"Choose a nickname:","merge choose organisation":"Choose an organisation:","merge choose org":"company","merge choose department":"department","merge choose title":"title","merge choose birthday":"Choose a birthday:","merge actions merge":"merge contacts","merge actions cancel":"cancel","error upload wrong filetype":"The uploaded file isn't a valid VCF/VCard format. Please try with another file."}}),require.register("locales/ro",function(t,e,o){o.exports={"list counter":"%{smart_count} contact |||| %{smart_count} contacts","list counter no-search":"no contact matches your criteria","list counter empty":"no contact at this time","tools subactions settings":"settings","tools actions add contact":"add contact","tools actions find duplicates":"find duplicates","tools search placeholder":"search for contacts","tools labels filters":"labels","tools labels filters all":"all contacts","tools contextual selected":"%{smart_count} contact selected |||| %{smart_count} contacts selected","tools contextual select all":"select all","tools contextual select none":"select none","tools contextual merge":"merge","tools contextual export":"export","tools contextual delete":"delete","bulk confirm delete title":"Delete contact |||| Delete contacts","bulk confirm delete message":"You'll delete a contact. Are you sure? |||| You'll delete %{smart_count} contacts. Are you sure?","bulk confirm delete ok":"delete","bulk confirm delete cancel":"keep 'em safe","settings title":"settings","settings in-out title":"import/export contacts","settings in-out import action":"import vcard","settings in-out export action":"export vcard","settings in-out import result":"You've just successfully imported %{smart_count} contact. |||| You've just successfully imported %{smart_count} contacts.","settings display title":"display settings","settings display sort gn":"sort by last name","settings display sort fn":"sort by first name","settings sync title":"mobile synchronization","settings sync gplay":"Access all your Cozy directly on your mobile device. Download our app now on the Google Play Store:","settings sync gplay get it":"Get it on Google play","settings sync carddav":"Looking for more information about the synchronization using CardDav? Take a look at [our documentation](%{link}).","card actions create":"create","card actions save":"save","card actions labels":"labels","card actions labels add":"add label","card actions labels create":"create label","card actions cancel":"cancel","card actions edit":"edit","card actions delete":"delete","card actions export":"export","card actions add select":"add field","card actions add birthday":"birthday","card actions add social":"social media","card actions add link":"url","card actions add other":"other information","card confirm delete title":"Remove %{name}?","card confirm delete message":"You'll remove %{name} from your contacts. Are you sure?","card confirm delete ok":"Delete Contact","card confirm delete cancel":"Keep it","card confirm cancel title":"Are you sure you want to leave?","card confirm cancel message":"Your contact hasn't been saved.","card confirm cancel ok":"Leave","card confirm cancel cancel":"Stay on Edit Mode","datapoints section tel":"Phone numbers","datapoints section email":"Email addresses","datapoints section adr":"Postal addresses","datapoints section xtras":"Additional informations","datapoint label name prefix":"prefix","datapoint label name first":"first name","datapoint label name middle":"middle name","datapoint label name given":"last name","datapoint label name suffix":"suffix","datapoint label org":"company","datapoint placeholder org":"add company name","datapoint label department":"department","datapoint placeholder department":"add department","datapoint label title":"title","datapoint placeholder title":"add title","datapoint placeholder tel":"add phone number","datapoint placeholder email":"add email address","datapoint placeholder adr":"add address","datapoint placeholder social":"add social media nickname","datapoint placeholder im":"add social media nickname","datapoint placeholder chat":"add social media nickname","datapoint placeholder url":"add an url","datapoint placeholder other":"add any information","datapoint label bday":"birthday","datapoint placeholder bday":"YYYY-MM-DD","datapoint label note":"notes","duplicates title":"Find Duplicates","duplicates actions mergeall":"merge all","duplicates empty":"No duplicates found","mergerow actions merge":"merge","mergerow actions dismiss":"dismiss","merge title":"Merge contacts","merge choose avatar":"Choose a profile picture:","merge choose name":"Choose a name:","merge choose nickname":"Choose a nickname:","merge choose organisation":"Choose an organisation:","merge choose org":"company","merge choose department":"department","merge choose title":"title","merge choose birthday":"Choose a birthday:","merge actions merge":"merge contacts","merge actions cancel":"cancel","error upload wrong filetype":"The uploaded file isn't a valid VCF/VCard format. Please try with another file."}}),require.register("locales/ru",function(t,e,o){o.exports={"list counter":"%{smart_count} contact |||| %{smart_count} contacts","list counter no-search":"no contact matches your criteria","list counter empty":"no contact at this time","tools subactions settings":"settings","tools actions add contact":"add contact","tools actions find duplicates":"find duplicates","tools search placeholder":"search for contacts","tools labels filters":"labels","tools labels filters all":"all contacts","tools contextual selected":"%{smart_count} contact selected |||| %{smart_count} contacts selected","tools contextual select all":"select all","tools contextual select none":"select none","tools contextual merge":"merge","tools contextual export":"export","tools contextual delete":"delete","bulk confirm delete title":"Delete contact |||| Delete contacts","bulk confirm delete message":"You'll delete a contact. Are you sure? |||| You'll delete %{smart_count} contacts. Are you sure?","bulk confirm delete ok":"delete","bulk confirm delete cancel":"keep 'em safe","settings title":"settings","settings in-out title":"import/export contacts","settings in-out import action":"import vcard","settings in-out export action":"export vcard","settings in-out import result":"You've just successfully imported %{smart_count} contact. |||| You've just successfully imported %{smart_count} contacts.","settings display title":"display settings","settings display sort gn":"sort by last name","settings display sort fn":"sort by first name","settings sync title":"mobile synchronization","settings sync gplay":"Access all your Cozy directly on your mobile device. Download our app now on the Google Play Store:","settings sync gplay get it":"Get it on Google play","settings sync carddav":"Looking for more information about the synchronization using CardDav? Take a look at [our documentation](%{link}).","card actions create":"create","card actions save":"save","card actions labels":"labels","card actions labels add":"add label","card actions labels create":"create label","card actions cancel":"cancel","card actions edit":"edit","card actions delete":"delete","card actions export":"export","card actions add select":"add field","card actions add birthday":"birthday","card actions add social":"social media","card actions add link":"url","card actions add other":"other information","card confirm delete title":"Remove %{name}?","card confirm delete message":"You'll remove %{name} from your contacts. Are you sure?","card confirm delete ok":"Delete Contact","card confirm delete cancel":"Keep it","card confirm cancel title":"Are you sure you want to leave?","card confirm cancel message":"Your contact hasn't been saved.","card confirm cancel ok":"Leave","card confirm cancel cancel":"Stay on Edit Mode","datapoints section tel":"Phone numbers","datapoints section email":"Email addresses","datapoints section adr":"Postal addresses","datapoints section xtras":"Additional informations","datapoint label name prefix":"prefix","datapoint label name first":"first name","datapoint label name middle":"middle name","datapoint label name given":"last name","datapoint label name suffix":"suffix","datapoint label org":"company","datapoint placeholder org":"add company name","datapoint label department":"department","datapoint placeholder department":"add department","datapoint label title":"title","datapoint placeholder title":"add title","datapoint placeholder tel":"add phone number","datapoint placeholder email":"add email address","datapoint placeholder adr":"add address","datapoint placeholder social":"add social media nickname","datapoint placeholder im":"add social media nickname","datapoint placeholder chat":"add social media nickname","datapoint placeholder url":"add an url","datapoint placeholder other":"add any information","datapoint label bday":"birthday","datapoint placeholder bday":"YYYY-MM-DD","datapoint label note":"notes","duplicates title":"Find Duplicates","duplicates actions mergeall":"merge all","duplicates empty":"No duplicates found","mergerow actions merge":"merge","mergerow actions dismiss":"dismiss","merge title":"Merge contacts","merge choose avatar":"Choose a profile picture:","merge choose name":"Choose a name:","merge choose nickname":"Choose a nickname:","merge choose organisation":"Choose an organisation:","merge choose org":"company","merge choose department":"department","merge choose title":"title","merge choose birthday":"Choose a birthday:","merge actions merge":"merge contacts","merge actions cancel":"cancel","error upload wrong filetype":"The uploaded file isn't a valid VCF/VCard format. Please try with another file."}}),require.register("locales/ru_RU",function(t,e,o){o.exports={"list counter":"%{smart_count} contact |||| %{smart_count} contacts","list counter no-search":"no contact matches your criteria","list counter empty":"no contact at this time","tools subactions settings":"settings","tools actions add contact":"add contact","tools actions find duplicates":"find duplicates","tools search placeholder":"search for contacts","tools labels filters":"labels","tools labels filters all":"all contacts","tools contextual selected":"%{smart_count} contact selected |||| %{smart_count} contacts selected","tools contextual select all":"select all","tools contextual select none":"select none","tools contextual merge":"merge","tools contextual export":"export","tools contextual delete":"delete","bulk confirm delete title":"Delete contact |||| Delete contacts","bulk confirm delete message":"You'll delete a contact. Are you sure? |||| You'll delete %{smart_count} contacts. Are you sure?","bulk confirm delete ok":"delete","bulk confirm delete cancel":"keep 'em safe","settings title":"settings","settings in-out title":"import/export contacts","settings in-out import action":"import vcard","settings in-out export action":"export vcard","settings in-out import result":"You've just successfully imported %{smart_count} contact. |||| You've just successfully imported %{smart_count} contacts.","settings display title":"display settings","settings display sort gn":"sort by last name","settings display sort fn":"sort by first name","settings sync title":"mobile synchronization","settings sync gplay":"Access all your Cozy directly on your mobile device. Download our app now on the Google Play Store:","settings sync gplay get it":"Get it on Google play","settings sync carddav":"Looking for more information about the synchronization using CardDav? Take a look at [our documentation](%{link}).","card actions create":"create","card actions save":"save","card actions labels":"labels","card actions labels add":"add label","card actions labels create":"create label","card actions cancel":"cancel","card actions edit":"edit","card actions delete":"delete","card actions export":"export","card actions add select":"add field","card actions add birthday":"birthday","card actions add social":"social media","card actions add link":"url","card actions add other":"other information","card confirm delete title":"Remove %{name}?","card confirm delete message":"You'll remove %{name} from your contacts. Are you sure?","card confirm delete ok":"Delete Contact","card confirm delete cancel":"Keep it","card confirm cancel title":"Are you sure you want to leave?","card confirm cancel message":"Your contact hasn't been saved.","card confirm cancel ok":"Leave","card confirm cancel cancel":"Stay on Edit Mode","datapoints section tel":"Phone numbers","datapoints section email":"Email addresses","datapoints section adr":"Postal addresses","datapoints section xtras":"Additional informations","datapoint label name prefix":"prefix","datapoint label name first":"first name","datapoint label name middle":"middle name","datapoint label name given":"last name","datapoint label name suffix":"suffix","datapoint label org":"company","datapoint placeholder org":"add company name","datapoint label department":"department","datapoint placeholder department":"add department","datapoint label title":"title","datapoint placeholder title":"add title","datapoint placeholder tel":"add phone number","datapoint placeholder email":"add email address","datapoint placeholder adr":"add address","datapoint placeholder social":"add social media nickname","datapoint placeholder im":"add social media nickname","datapoint placeholder chat":"add social media nickname","datapoint placeholder url":"add an url","datapoint placeholder other":"add any information","datapoint label bday":"birthday","datapoint placeholder bday":"YYYY-MM-DD","datapoint label note":"notes","duplicates title":"Find Duplicates","duplicates actions mergeall":"merge all","duplicates empty":"No duplicates found","mergerow actions merge":"merge","mergerow actions dismiss":"dismiss","merge title":"Merge contacts","merge choose avatar":"Choose a profile picture:","merge choose name":"Choose a name:","merge choose nickname":"Choose a nickname:","merge choose organisation":"Choose an organisation:","merge choose org":"company","merge choose department":"department","merge choose title":"title","merge choose birthday":"Choose a birthday:","merge actions merge":"merge contacts","merge actions cancel":"cancel","error upload wrong filetype":"The uploaded file isn't a valid VCF/VCard format. Please try with another file."}}),require.register("models/config",function(t,e,o){var a,n=function(t,e){function o(){this.constructor=t}for(var a in e)r.call(e,a)&&(t[a]=e[a]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},r={}.hasOwnProperty;o.exports=a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.url="config",e}(Backbone.Model)}),require.register("models/contact",function(t,e,o){var a,n,r=function(t,e){function o(){this.constructor=t}for(var a in e)i.call(e,a)&&(t[a]=e[a]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.defaults={name:"other",type:"other",value:""},e.prototype.parse=function(t){return"adr"===t.name&&_.isArray(t.value)&&(t.value=VCardParser.adrArrayToString(t.value)),t},e}(Backbone.Model),o.exports=a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return r(e,t),e.prototype.urlRoot="contacts",e.prototype.defaults={n:";;;;"},e.prototype.parse=function(t){var e,o,a,r,i,s,c;for(r in t)c=t[r],""===c&&delete t[r];return t.n&&(i=t.n.split(";"),a=i[0],o=i[1],t.initials=_.chain([o,a]).compact().map(function(t){return t[0].toAscii()[0]}).join("").value()),(s=t.url)&&(delete t.url,t.datapoints.unshift({name:"url",type:"main",value:s})),e=this.attributes.datapoints||new Backbone.Collection(t.datapoints||[],{model:n,parse:!0}),e.comparator="name",t.datapoints=e,t.tags=_.invoke(t.tags,"toLowerCase"),t},e.prototype.sync=function(t,o,a){var n,r,i,s,c,l;return r=o.get("avatar")||o.get("photo"),r&&(o.unset("avatar",{silent:!0}),o.unset("photo",{silent:!0}),l=a.success,a.success=function(t){return function(e,o,n){return t.savePicture(r,e,{success:function(){return l.apply(t,arguments),t.fetch()},error:a.error})}}(this)),n=o.toJSON(),n.fn=VCardParser.nToFN(n.n.split(";")),i=(null!=(c=o.attributes.datapoints)?c.toJSON():void 0)||[],n.datapoints=i.map(function(t){return"adr"===t.name&&(t.value=VCardParser.adrStringToArray(t.value)),t}),s=_.findWhere(n.datapoints,{name:"url"}),s&&(n.datapoints=_.without(n.datapoints,s),n.url=s.value),a.attrs=n,e.__super__.sync.apply(this,arguments)},e.prototype.toString=function(t){var e,o,a,n;return null==t&&(t={}),n=a=this.attributes.n.split(";"),o=n[0],e=n[1],o=_.compact([t.pre,o,t.post]).join(""),a[0]=e,a[1]=o,_.compact(a).join(" ")},e.prototype.toHighlightedString=function(t,e){var o,a,n,r;return null==e&&(e={}),o=e.format?{pre:"»",post:"«"}:void 0,n=this.toString(o),t&&(a=fuzzy.match(t,n,e)),r=a?a.rendered:n,o&&(r=r.replace("»",e.format.pre).replace("«",e.format.post)),r},e.prototype.match=function(t,e){var o,a,n,r,i,s,c,l,d;for(null==e&&(e={}),c=!1,o=e.format?{pre:"»",post:"«"}:void 0,l=[this.toString(o)],e.fullsearch&&(i=_.compact(this.attributes.datapoints.map(function(t){return"adr"!==t.get("name")?t.get("value"):void 0})),l=l.concat(i).concat(this.attributes.tags)),a=n=0,r=l.length;r>n;a=++n)if(d=l[a],s=fuzzy.match(t,d,e)){c=s,0===a&&o&&(c.rendered=s.rendered.replace("»",e.format.pre).replace("«",e.format.post));break}return c},e.prototype.savePicture=function(t,e,o){var a,n,r,i,s,c,l;if(!e.id)return o.error(new Error("Model should have been saved once."));for(n=atob(t),a=[],s=c=0,l=n.length;l>=0?l>=c:c>=l;s=l>=0?++c:--c)a.push(n.charCodeAt(s));return r=new Blob([new Uint8Array(a)],{type:"image/jpeg"}),i=new FormData,i.append("picture",r),i.append("contact",e),$.ajax({type:"PUT",url:"contacts/"+e.id+"/picture",data:i,contentType:!1,processData:!1,success:o.success,error:o.error})},e.prototype.picturetoa=function(t){var e,o;return(null!=(o=this.attributes._attachments)?o.picture:void 0)?(e=new Image,e.onload=function(){var e,o,a,n;return o=document.createElement("canvas"),o.width=this.naturalWidth,o.height=this.naturalHeight,a=o.getContext("2d"),a.drawImage(this,0,0),n=o.toDataURL("image/jpeg").split(","),e=n[n.length-1],t(e)},e.src="contacts/"+this.id+"/picture.png"):t()},e.prototype.toVCF=function(t){var e;return e=this.toJSON(),e.datapoints=e.datapoints.toJSON(),this.picturetoa(function(o){return t(VCardParser.toVCF(e,o))})},e}(Backbone.Model)}),require.register("models/tag",function(t,e,o){var a,n=function(t,e){function o(){this.constructor=t}for(var a in e)r.call(e,a)&&(t[a]=e[a]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},r={}.hasOwnProperty;o.exports=a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.urlRoot="tags",e.prototype.parse=function(t){return t.name=t.name.toLowerCase(),t},e}(Backbone.Model)}),require.register("routes/contacts",function(t,e,o){var a,n,r=function(t,e){function o(){this.constructor=t}for(var a in e)i.call(e,a)&&(t[a]=e[a]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty,s=[].indexOf||function(t){for(var e=0,o=this.length;o>e;e++)if(e in this&&this[e]===t)return e;return-1};n=void 0,o.exports=a=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return r(o,t),o.prototype.routes={"new":"create",duplicates:"duplicates",":slug":"show",":slug/edit":"edit","":"index"},o.prototype.initialize=function(){return n=e("application")},o.prototype._ensureContacts=function(t){return _.isFunction(t)?n.contacts.isEmpty()?this.listenToOnce(n.contacts,"sync",t):t():void 0},o.prototype._setCardState=function(t,e){var o;return o=s.call(n.contacts.pluck("id"),t)>=0||"new"===t,n.model.set("dialog",o?t:!1),n.vent.trigger("mode:edit",e)},o.prototype.index=function(){return n.search("tag",null)},o.prototype.show=function(t){return this._ensureContacts(_.wrap(this._setCardState,function(e){return e(t)}))},o.prototype.edit=function(t){return this._ensureContacts(_.wrap(this._setCardState,function(e){return e(t,!0)}))},o.prototype.create=function(){return this._setCardState("new",!0)},o.prototype.duplicates=function(){return this._ensureContacts(function(){return n.model.set("dialog","duplicates")})},o}(Backbone.SubRoute)}),require.register("routes/index",function(t,e,o){var a,n,r,i,s=function(t,e){function o(){this.constructor=t}for(var a in e)c.call(e,a)&&(t[a]=e[a]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},c={}.hasOwnProperty;a=e("routes/contacts"),r=e("routes/tags"),i=void 0,o.exports=n=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return s(o,t),o.prototype.routes={settings:"settings","contact/:slug":"legacyContactRedirect","":"index"},o.prototype.initialize=function(){return i=e("application"),i.on("start",function(){var t,e;return t=new a("contacts"),e=new r("tags")}),this.listenTo(i.model,"change:dialog",function(t,e){var o,a,n;if(!e)return o=null!=(n=i.model.get("filter"))?n.match(/tag:(\w+)/i):void 0,a=o?"tags/"+o[1]:"contacts",this.navigate(a)})},o.prototype.index=function(){return this.navigate("contacts",{trigger:!0})},o.prototype.settings=function(){return i.model.set("dialog","settings")},o.prototype.legacyContactRedirect=function(t){return this.navigate("contacts/"+t,{trigger:!0})},o}(Backbone.Router)}),require.register("routes/tags",function(t,e,o){var a,n,r=function(t,e){function o(){this.constructor=t}for(var a in e)i.call(e,a)&&(t[a]=e[a]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;n=void 0,o.exports=a=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return r(o,t),o.prototype.routes={":slug":"filter"},o.prototype.initialize=function(){var t;return n=e("application"),t=document.createElement("style"),t.appendChild(document.createTextNode("")),document.head.appendChild(t),this.sheet=t.sheet,this.listenTo(n.vent,"filter:tag",function(t){return function(e){var o;return o=t.sheet.cssRules.length,e&&o>1||!e&&1===o?t.sheet.deleteRule(0):void 0}}(this))},o.prototype.filter=function(t){var e;return n.search("tag",t),e=this.sheet.cssRules.length,this.sheet.insertRule("[role=row]:not(.tag_"+t+"),\n[role=rowgroup]:not(.tag_"+t+") { display: none }",e)},o}(Backbone.SubRoute)}),require.register("views/app_layout",function(t,e,o){var a,n,r,i,s,c,l,d,u,p,m,f,h,g=function(t,e){function o(){this.constructor=t}for(var a in e)y.call(e,a)&&(t[a]=e[a]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},y={}.hasOwnProperty;r=e("models/contact"),i=e("views/models/contact"),l=e("views/tools/default_actions"),c=e("views/tools/context_actions"),u=e("views/labels"),m=e("views/tools/toolbar"),s=e("views/contacts"),n=e("views/contacts/card"),d=e("views/duplicates"),p=e("views/settings"),h=e("lib/i18n"),f=void 0,o.exports=a=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return g(o,t),o.prototype.template=e("views/templates/layouts/app"),o.prototype.el='[role="application"]',o.prototype.behaviors={Navigator:{},Dropdown:{},Keyboard:{keymaps:{33:"key:pageup",34:"key:pagedown"}}},o.prototype.ui={navigate:'aside [role="button"], .name',content:'main [role="contentinfo"] ',counter:"main .counter"},o.prototype.regions={actions:"aside .tool-actions",labels:"aside .tool-labels",indexes:"@ui.content .indexes",results:"@ui.content .results",toolbar:'main [role="toolbar"]',dialogs:{selector:".dialogs",regionClass:e("lib/regions/dialogs")},alerts:{selector:".alerts",regionClass:e("lib/regions/dialogs")}},o.prototype.modelEvents={"change:dialog":"showDialog","change:selected":"swapContextualMenu","change:scored":"onSearchResults"},o.prototype.childEvents={"drawer:toggle":"toggleDrawer","contacts:select":function(t,e){return this.model.select(e)},"contacts:unselect":function(t,e){return this.model.unselect(e)},"dialog:close":function(){return this.model.set("dialog",!1)}},o.prototype.initialize=function(){return f=e("application"),this.listenToOnce(f.tags,"sync",this.showFilters),this.listenToOnce(f.contacts,"sync",this.showContactsList),this.listenTo(f.filtered,{update:this.updateCounter}),this.listenTo(f.model,{"change:filter":this.updateCounter}),this.bindEntityEvents(f.vent,{"busy:enable":function(){return this.$el.attr("aria-busy",!0)},"busy:disable":function(){return this.$el.attr("aria-busy",!1)}})},o.prototype.onRender=function(){var t;return this.showChildView("toolbar",new m),this.showChildView("actions",new l),t=_.debounce(function(){return f.vent.trigger("content:scroll")},80),this.$(this.ui.content).on("scroll",t)},o.prototype.onKeyPageup=function(){var t;return t=this.ui.content[0],t.scrollTop-=t.offsetHeight},o.prototype.onKeyPagedown=function(){var t;return t=this.ui.content[0],t.scrollTop+=t.offsetHeight},o.prototype.showFilters=function(){return this.showChildView("labels",new u({model:this.model}))},o.prototype.showContactsList=function(){var t;return t=new s({collection:f.filtered}),this.listenToOnce(t,{show:function(){return f.vent.trigger("busy:disable"),this.ui.content.trigger("focus"),this.updateCounter()}}),this.showChildView("indexes",t)},o.prototype.onSearchResults=function(t,e){return this.indexes.$el.attr("aria-hidden",e),e?setTimeout(function(t){return function(){var e;return e=new s({collection:f.filtered}),t.showChildView("results",e)}}(this)):this.results.reset()},o.prototype.showDialog=function(t,e){var o;return e?(o=function(){switch(e){
case"settings":return new p({model:this.model});case"duplicates":return new d;default:return this._buildContactView(e)}}.call(this),this.showChildView("dialogs",o)):this.dialogs.empty()},o.prototype._buildContactView=function(t){var e,o;return e="new"===t?new r(null,{parse:!0}):f.contacts.get(t),o=new i({"new":"new"===t},{model:e}),o.listenTo(f.vent,"mode:edit",function(t){return this.set("edit",t)}),new n({model:o})},o.prototype.updateCounter=function(){var t,e;return f.contacts.length?(e=f.filtered.get({tagged:!0}).length,t=e?h("list counter",{smart_count:e}):h("list counter no-search")):t=h("list counter empty"),this.ui.counter.text(t).toggleClass("important",!e)},o.prototype.toggleDrawer=function(){var t,e;return t=this.$("aside.drawer"),e="true"===t.attr("aria-expanded"),t.attr("aria-expanded",!e)},o.prototype.swapContextualMenu=function(t,e){var o;return o=t._previousAttributes.selected,o.length&&e.length?void 0:_.isEmpty(e)?this.showChildView("actions",new l):this.showChildView("actions",new c({model:this.model}))},o}(Mn.LayoutView)}),require.register("views/contacts/card",function(t,e,o){var a,n,r,i,s,c,l=function(t,e){return function(){return t.apply(e,arguments)}},d=function(t,e){function o(){this.constructor=t}for(var a in e)u.call(e,a)&&(t[a]=e[a]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},u={}.hasOwnProperty;a=e("views/contacts/components/avatar"),i=e("views/contacts/components/data"),s=e("views/contacts/components/edit_tags"),c=e("lib/i18n"),n=e("config").contact,o.exports=r=function(t){function o(){return this._deleteModalCfg=l(this._deleteModalCfg,this),o.__super__.constructor.apply(this,arguments)}return d(o,t),o.prototype.template=e("views/templates/contacts/card"),o.prototype.tagName="section",o.prototype.className="card",o.prototype.attributes={role:"dialog"},o.prototype.behaviors=function(){return{Navigator:{},Dialog:{},Form:{},Dropdown:{},Confirm:{triggers:{"click @ui.btnDelete":this._deleteModalCfg}}}},o.prototype.ui={btnEdit:'.edit[role="button"]',btnDelete:"button.delete",btnExport:'[formaction="contact/export"]',navigate:"[href^=contacts], [data-next]",formSubmit:'[type="submit"]',formClear:"button.clear",formInputs:".group:not([data-cid]) input, .group:not([data-cid]) textarea",avatar:".avatar"},o.prototype.regions={avatar:'[role="img"]',infos:".data",tags:"aside .tags"},o.prototype.triggers={"click @ui.btnExport":"export"},o.prototype.events={"click @ui.formSubmit":"showSaving"},o.prototype.modelEvents={"change:edit":"render",save:"onSave",destroy:function(){return this.triggerMethod("dialog:close")}},o.prototype.childEvents={"form:key:enter":"onFormKeyEnter"},o.prototype.initialize=function(){return Mn.bindEntityEvents(this.model,this,this.model.viewEvents)},o.prototype.serializeData=function(){return _.extend({},o.__super__.serializeData.apply(this,arguments),{lists:n.datapoints.types})},o.prototype._deleteModalCfg=function(){var t,e;return e={name:this.model.get("fn")},t={event:"delete",title:c("card confirm delete title",e),message:c("card confirm delete message",e),btn_ok:c("card confirm delete ok"),btn_cancel:c("card confirm delete cancel")}},o.prototype.onRender=function(){return this.showChildView("avatar",new a({model:this.model})),this.showChildView("infos",new i({model:this.model})),this.showChildView("tags",new s({model:this.model})),this.$('[role="contentinfo"]').toggleClass("edit",!!this.model.get("edit"))},o.prototype.onDomRefresh=function(){return this.model.get("edit")?void 0:this.ui.btnEdit.trigger("focus")},o.prototype.onSave=function(){var t,o;if(this.model.get("new"))return t=e("application"),o="contacts/"+this.model.get("id"),this.hideSaving(),t.router.navigate(o,{trigger:!0})},o.prototype.onEditCancel=function(){return this.model.get("new")?this.triggerMethod("dialog:close"):void 0},o.prototype.onFormKeyEnter=function(){var t;return t=this.$(".data.edit").find('input:not([type="hidden"]), textarea'),"textarea"!==document.activeElement.tagName.toLowerCase()?t.eq(t.index(document.activeElement)+1).trigger("focus"):void 0},o.prototype.showSaving=function(){return this.ui.formSubmit.attr("aria-busy",!0)},o.prototype.hideSaving=function(){return this.ui.formSubmit.attr("aria-busy",!1)},o}(Mn.LayoutView)}),require.register("views/contacts/components/avatar",function(t,e,o){var a,n=function(t,e){function o(){this.constructor=t}for(var a in e)r.call(e,a)&&(t[a]=e[a]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},r={}.hasOwnProperty;o.exports=a=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.template=e("views/templates/contacts/components/avatar"),o.prototype.behaviors={PickAvatar:{}},o.prototype.ui=function(){return this.options.model.get("edit")?{avatar:".avatar"}:void 0},o.prototype.modelEvents={"change:n":"updateInitials","change:avatar":"render"},o.prototype.getInitialsColor=function(){return ColorHash.getColor(this.model.get("n"),"cozy")},o.prototype.serializeData=function(){return _.extend({},o.__super__.serializeData.apply(this,arguments),{bg:this.getInitialsColor()})},o.prototype.updateInitials=function(t,e){var o;return o=this.el.querySelector(".initials"),o?(o.innerHTML=this.model.get("initials"),o.style["background-color"]=this.getInitialsColor()):void 0},o}(Mn.ItemView)}),require.register("views/contacts/components/data",function(t,e,o){var a,n,r,i,s,c=function(t,e){function o(){this.constructor=t}for(var a in e)l.call(e,a)&&(t[a]=e[a]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},l={}.hasOwnProperty,d=[].indexOf||function(t){for(var e=0,o=this.length;o>e;e++)if(e in this&&this[e]===t)return e;return-1};r=e("views/contacts/components/datapoints"),s=e("views/contacts/components/xtras"),i=e("views/contacts/components/edit_actions"),a=e("config").contact,o.exports=n=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return c(o,t),o.prototype.template=e("views/templates/contacts/components/data"),o.prototype.behaviors={Form:{}},o.prototype.ui={formAdd:".actions button"},o.prototype.modelEvents={change:function(){return this.model.get("edit")?void 0:this.render()}},o.prototype.childEvents={"form:key:enter":function(){return this.triggerMethod("form:key:enter")}},o.prototype.initialize=function(){return Mn.bindEntityEvents(this.model,this,this.model.viewEvents)},o.prototype.serializeData=function(){return _.extend({},o.__super__.serializeData.apply(this,arguments),{fullname:this.model.toString({pre:"<b>",post:"</b>"})})},o.prototype._renderDatapoints=function(){return this.$(".datapoints").each(function(t){return function(e,o){var a;return a=o.dataset.type,t.addRegion(a,"[data-type='"+a+"']"),t.showChildView(a,new r({collection:t.model.getDatapoints(a),name:a,cardViewModel:t.model}))}}(this)),this.addRegion("xtras-infos",'[data-type="xtras-infos"]'),this.showChildView("xtras-infos",new s({model:this.model}))},o.prototype._renderEditActions=function(){return this.addRegion("actions",".actions"),this.showChildView("actions",new i({model:this.model}))},o.prototype.onRender=function(){return this._renderDatapoints(),this.model.get("edit")?this._renderEditActions():void 0},o.prototype.onDomRefresh=function(){return this.model.get("edit")?this.$('input:not([type="hidden"])').eq(1).trigger("focus"):void 0},o.prototype.onFormFieldAdd=function(t){var e;return e=this.getRegion("xtras").currentView,d.call(a.xtras,t)<0?e.addEmptyField(t):void 0},o}(Mn.LayoutView)}),require.register("views/contacts/components/datapoint",function(t,e,o){var a,n,r=function(t,e){function o(){this.constructor=t}for(var a in e)i.call(e,a)&&(t[a]=e[a]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;a=e("config").contact,o.exports=n=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return r(o,t),o.prototype.tagName=function(){return this.options.cardViewModel.get("edit")?"div":"li"},o.prototype.className="group",o.prototype.attributes=function(){return{"data-cid":this.model.cid}},o.prototype.template=e("views/templates/contacts/components/datapoint"),o.prototype.ui={type:"input.type"},o.prototype.events=function(){return"xtras"===this.options.name?{"keyup @ui.type":_.debounce(this.updateType,250),"change @ui.type":this.updateType}:void 0},o.prototype.serializeData=function(){var t,e;return t=this.model.toJSON(),e=function(){switch(t.name){case"social":case"chat":return"social";case"url":return"url";default:return"default"}}(),null==t.type&&(t.type=a.datapoints.types[e][0].split(":")[0]),{edit:this.options.cardViewModel.get("edit"),ref:this.options.cardViewModel.get("ref"),name:this.options.name,index:this.options.index,entity:e,point:t}},o.prototype.updateType=function(t){var e,o,n;return o=this.model.get("name"),"url"!==o?(e=_.find(a.datapoints.types.social,function(e){return e.match(new RegExp("^"+t.currentTarget.value.toLowerCase()))}),e?(n=e.split(":"),o=n[n.length-1]):o="other",this.$(t.currentTarget).siblings(".name").val(o)):void 0},o}(Mn.ItemView)}),require.register("views/contacts/components/datapoints",function(t,e,o){var a,n,r,i,s=function(t,e){function o(){this.constructor=t}for(var a in e)c.call(e,a)&&(t[a]=e[a]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},c={}.hasOwnProperty,l=[].indexOf||function(t){for(var e=0,o=this.length;o>e;e++)if(e in this&&this[e]===t)return e;return-1};i=e("lib/i18n"),n=e("views/contacts/components/datapoint"),a=e("config").contact,o.exports=r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.tagName=function(){return this.options.cardViewModel.get("edit")?"fieldset":"ul"},e.prototype.template=function(t){var e;return t.edit?(e=i("datapoints section "+t.name),"<legend>"+e+"</legend>"):void 0},e.prototype.behaviors={Form:{}},e.prototype.ui=function(){var t;return t={formInputs:"input, textarea",formDelete:"button.delete"},"xtras"!==this.options.name&&(t.formAutoAdd=".value"),t},e.prototype.childView=n,e.prototype.childViewOptions=function(t,e){return _.extend(_.pick(this.options,"name","cardViewModel"),{index:e})},e.prototype.initialize=function(){return this.options.cardViewModel.get("edit")?this._initializeEditMode():void 0},e.prototype.serializeData=function(){return{name:this.options.name,edit:this.options.cardViewModel.get("edit")}},e.prototype._initializeEditMode=function(){return"xtras"!==this.options.name?this.addEmptyField():void 0},e.prototype.onFormFieldAdd=function(t){return this.addEmptyField(t)},e.prototype.onFormFieldUpdate=function(t){var e,o,a;return e=this.$(t).parents("[data-cid]"),a=this.collection.get(e.data("cid")),o=_.reduce(e.find("input, textarea"),function(t,e){return t[_.last(e.name.split("."))]=e.value,t},{}),a.set(o)},e.prototype.onFormFieldDelete=function(t){return this.collection.remove(t)},e.prototype.getDatapoints=function(){return this.collection.filter(function(t){return!_.isEmpty(t.get("value"))})},e.prototype.addEmptyField=function(t){var e;return e=this.collection.add({type:void 0,value:"",name:t||this.options.name}),l.call(a.datapoints.main,t)>=0?void 0:this.$("[data-cid='"+e.cid+"'] input.value").trigger("focus")},e}(Mn.CompositeView)}),require.register("views/contacts/components/edit_actions",function(t,e,o){var a,n=function(t,e){function o(){this.constructor=t}for(var a in e)r.call(e,a)&&(t[a]=e[a]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},r={}.hasOwnProperty;o.exports=a=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.tagName="dl",o.prototype.attributes={"aria-haspopup":!0,"aria-expanded":!1,"data-position":"top left"},o.prototype.template=e("views/templates/contacts/components/add_field_dropdown"),o.prototype.modelEvents={"change:bday":"render"},o}(Mn.ItemView)}),require.register("views/contacts/components/edit_tags",function(t,e,o){var a,n,r,i,s=function(t,e){function o(){this.constructor=t}for(var a in e)c.call(e,a)&&(t[a]=e[a]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},c={}.hasOwnProperty;n=BackboneProjections.Filtered,r=e("views/contacts/components/tag"),i=void 0,o.exports=a=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return s(o,t),o.prototype.tagName="dl",o.prototype.attributes={"aria-haspopup":!0,"aria-expanded":!1,"data-position":"bottom right"},o.prototype.template=e("views/templates/contacts/components/edit_tags"),o.prototype.childView=r,o.prototype.childViewOptions=function(t){return{contactViewModel:this.model}},o.prototype.childViewContainer="ul",o.prototype.ui={tags:"li:not(.create) input",create:".create",dropdown:"dd"},o.prototype.events={"change @ui.tags":"onClickTag","click @ui.dropdown":function(t){return t.stopPropagation()},"click @ui.create button":"toggleCreate",'keydown @ui.create [name="name"]':"addNewTag"},o.prototype.modelEvents={"change:tags":function(t){return this.toggleCreate(!1),this.children.invoke("render")}},o.prototype.initialize=function(){return i=e("application"),this.collection=new n(i.tags,{filter:function(t){return null!=i.contacts.tagMap[t.get("name")]}}),Mn.bindEntityEvents(this.model,this,this.model.viewEvents)},o.prototype.onClickTag=function(t){var e;return e=this.$("li:not(.create) input").serializeArray().map(function(t){return i.tags.get(t.value).get("name")}),this.triggerMethod("tags:update",e)},o.prototype.toggleCreate=function(t){return(_.isNull(t)||!_.isBoolean(t))&&(t="true"!==this.ui.create.attr("aria-expanded")),this.ui.create.attr("aria-expanded",t),this.ui.create.find('[name="name"]').val(""),t?this.ui.create.find('input[name="name"]').trigger("focus"):void 0},o.prototype.addNewTag=function(t){var e;return t.stopPropagation(),e=t.currentTarget.value,13!==t.which||_.isEmpty(e)?void 0:this.triggerMethod("tags:add",e)},o}(Mn.CompositeView)}),require.register("views/contacts/components/tag",function(t,e,o){var a,n=function(t,e){function o(){this.constructor=t}for(var a in e)r.call(e,a)&&(t[a]=e[a]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},r={}.hasOwnProperty;o.exports=a=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.tagName="li",o.prototype.template=e("views/templates/contacts/components/tag"),o.prototype.serializeData=function(){var t;return t=this.options.contactViewModel.get("tags"),_.extend({},o.__super__.serializeData.apply(this,arguments),{selected:_.includes(t,this.model.get("name"))})},o}(Mn.ItemView)}),require.register("views/contacts/components/xtras",function(t,e,o){var a,n,r=function(t,e){function o(){this.constructor=t}for(var a in e)i.call(e,a)&&(t[a]=e[a]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty,s=[].slice;a=e("config").contact,o.exports=n=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return r(o,t),o.prototype.tagName=function(){return this.model.get("edit")?"fieldset":"ul"},o.prototype.template=e("views/templates/contacts/components/xtras"),o.prototype.modelEvents=function(){return _.reduce(a.xtras,function(t,e){return t["change:"+e]=function(){var t;return t=1<=arguments.length?s.call(arguments,0):[],this.render.apply(this,t),this.setFocus.apply(this,t)},t},{})},o.prototype.serializeData=function(){return{edit:this.model.get("edit"),ref:this.model.get("ref"),xtras:_.reduce(a.xtras,function(t){return function(e,o){return t.model.has(o)&&(e[o]=t.model.get(o)),e}}(this),{})}},o.prototype.setFocus=function(t){var e,o;return o=this.model.get("ref"),e=_.keys(t.changed)[0],this.$("#"+e+"-"+o).trigger("focus")},o}(Mn.ItemView)}),require.register("views/contacts/index",function(t,e,o){var a,n,r,i,s,c=function(t,e){function o(){this.constructor=t}for(var a in e)l.call(e,a)&&(t[a]=e[a]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},l={}.hasOwnProperty;n=e("views/models/contact"),a=e("views/contacts/row"),i=Backbone.Collection,s=e("config").indexes,o.exports=r=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return c(o,t),o.prototype.sort=!1,o.prototype.tagName=function(){var t,o;return t=e("application").model,t.get("scored")?"ul":(null!=(o=this.model)?o.has("char"):void 0)?"dl":"div"},o.prototype.attributes=function(){var t,o;return t=e("application").model,t.get("scored")||(null!=(o=this.model)?o.has("char"):void 0)?{role:"rowgroup"}:void 0},o.prototype.template=e("views/templates/contacts"),o.prototype.events=function(){return null==this.model?{'change [type="checkbox"]':"updateBulkSelection"}:void 0},o.prototype.attachElContent=function(t){return this.el.innerHTML=t,this},o.prototype.attachBuffer=function(t,e){var o,a;return a=Mn._getValue(this.childViewContainer,this),o=_.isString(a)?this.el.querySelector(a):this.el,o.appendChild(e),this.toggleEmpty()},o.prototype.buildChildView=function(t){var e;return new(e=this._hasContacts?a:this.constructor)({model:t})},o.prototype.showCollection=function(){var t;return t="scored"===this._mode?this.collection.get():this._hasContacts?this.collection.get({index:this.model.get("char")}):this.collection.models,t.forEach(function(t){return function(e,o){var a;return a=t.buildChildView(e),t._updateIndices(a,!0,o),t.children.add(a),t.renderChildView(a,o),a._parent=t}}(this))},o.prototype._createBuffer=function(){var t;return t=document.createDocumentFragment(),this._bufferedChildren.forEach(function(e){return t.appendChild(e.el)}),t},o.prototype._onCollectionRemove=function(t){var e,o;return e=t.model,o=this.children.find(function(t){return t.model.model===e}),this.removeChildView(o),this.checkEmpty()},o.prototype.initialize=function(){var t,o,a,n;return a=e("application"),o=a.model,t=a.filtered,this._mode=o.get("scored")?"scored":"indexed",this._hasContacts=(null!=(n=this.model)?n.has("char"):void 0)||"scored"===this._mode,this._hasContacts&&"indexed"===this._mode?(this.collection=t,this.childViewContainer="ul",this.filter=function(t){return function(e){return _.includes(t.collection.get({index:t.model.get("char")}),e)}}(this)):"indexed"!==this._mode||this._hasContacts||(this.collection=new i(Array.prototype.map.call(s,function(t){return{"char":t}}))),this._hasContacts&&(this.sort=!0,this.listenTo(this.collection,{update:this.updateTagClasses}),this.listenTo(this.collection.underlying,{"change:tags":this.updateTagClasses})),"scored"===this._mode&&this.listenTo(o,{"change:filter":function(){return this.children.invoke("highlight")}}),"indexed"===this._mode?this.listenTo(o,{"change:scored":this.toggleEvents}):void 0},o.prototype.toggleEvents=function(t,e){return e?(this.stopListening(this.collection,"add"),this.stopListening(this.collection,"remove"),this.stopListening(this.collection,"reset"),this.stopListening(this.collection,"sort")):setTimeout(function(t){return function(){return t._initialEvents(),t.updateTagClasses()}}(this))},o.prototype.toggleEmpty=function(){return this.el.classList.toggle("empty",!this.children.length)},o.prototype.updateTagClasses=function(){var t,e;return e=_.chain(this.collection.get({index:null!=(t=this.model)?t.get("char"):void 0})).invoke("get","tags").flatten().compact().map(function(t){return"tag_"+t}).join(" ").value(),e.length?this.el.className=e:this.el.removeAttribute("class"),this.toggleEmpty()},o.prototype.updateBulkSelection=function(t){var e,o,a;return a=t.currentTarget.checked,e=t.currentTarget.value,o=a?"contacts:select":"contacts:unselect",this.triggerMethod(o,e)},o.prototype.onRender=o.prototype.updateTagClasses,o}(Mn.CompositeView)}),require.register("views/contacts/merge",function(t,e,o){var a,n,r=function(t,e){function o(){this.constructor=t}for(var a in e)i.call(e,a)&&(t[a]=e[a]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;n=e("lib/i18n"),o.exports=a=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return r(o,t),o.prototype.template=e("views/templates/contacts/merge"),o.prototype.tagName="section",o.prototype.className="merge",o.prototype.attributes={role:"alertdialog"},o.prototype.behaviors={Dialog:{},Form:{}},o.prototype.ui={formSubmit:'[type="submit"]',formInputs:"input",cancel:".cancel"},o.prototype.modelEvents={"contacts:merge":"onClose"},o.prototype.events={"click @ui.cancel":"onCancel"},o.prototype.initialize=function(){return Mn.bindEntityEvents(this.model,this,this.model.viewEvents)},o.prototype.serializeData=function(){return{model:this.model.toJSON()}},o.prototype.onDomRefresh=function(){return _.defer(function(t){return function(){return t.$el.attr("aria-busy",!0)}}(this))},o.prototype.onFormSubmit=function(){return this.model.merge(),this.onClose()},o.prototype.onCancel=function(){return this.model.trigger("contacts:merge",this.model,"abort")},o.prototype.onClose=function(){return e("application").layout.alerts.empty()},o}(Mn.ItemView)}),require.register("views/contacts/row",function(t,e,o){var a,n,r,i=function(t,e){function o(){this.constructor=t}for(var a in e)s.call(e,a)&&(t[a]=e[a]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},s={}.hasOwnProperty,c=[].indexOf||function(t){for(var e=0,o=this.length;o>e;e++)if(e in this&&this[e]===t)return e;return-1};n=e("config").search.pattern("text"),r=void 0,o.exports=a=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return i(o,t),o.prototype.supportsRenderLifecycle=!1,o.prototype.tagName="li",o.prototype.attributes={role:"row"},o.prototype._format={pre:"<b>",post:"</b>"},o.prototype.initialize=function(){return r=e("application"),this.listenTo(this.model,{change:function(){return this.render(),this.lazyLoadAvatar()}}),this.listenTo(r.model,{"change:selected":this.refreshChecked}),this.listenTo(r.vent,{"content:scroll":this.lazyLoadAvatar})},o.prototype.render=function(){var t,o,a,n;return o=this.el,t=this.serializeData(),o.className=null!=(a=this.model.get("tags"))?a.map(function(t){return"tag_"+t}).join(" "):void 0,n=e("views/templates/contacts/row"),o.innerHTML=n(t),this.highlight()},o.prototype.serializeData=function(){var t;return _.extend(this.model.toJSON(),{selected:(t=this.model.id,c.call(r.model.get("selected"),t)>=0),fullname:this.model.toString(this._format)})},o.prototype.highlight=function(){var t,e,o;return(t=null!=(o=r.model.get("filter"))?o.match(n):void 0)?(e=this.model.toHighlightedString(t[1],{pre:'<span class="search">',post:"</span>",format:this._format}),this.el.querySelector(".name p").innerHTML=e):void 0},o.prototype.refreshChecked=function(t,e){var o;return this.$('[type="checkbox"]').prop("checked",(o=this.model.id,c.call(e,o)>=0))},o.prototype.lazyLoadAvatar=function(){var t,e,o,a;return t=document.documentElement,e=this.el.querySelector("img.avatar"),a=this.el.getBoundingClientRect(),o=a.top<=(window.innerHeight||t.clientHeight),o&&e?e.setAttribute("src",e.dataset.src):void 0},o.prototype.onShow=o.prototype.lazyLoadAvatar,o}(Backbone.View)}),require.register("views/duplicates/index",function(t,e,o){var a,n,r,i,s=function(t,e){function o(){this.constructor=t}for(var a in e)c.call(e,a)&&(t[a]=e[a]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},c={}.hasOwnProperty;n=e("collections/duplicates"),i=e("lib/i18n"),a=e("config").contact,o.exports=r=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return s(o,t),o.prototype.template=e("views/templates/duplicates"),o.prototype.tagName="section",o.prototype.className="duplicates",o.prototype.attributes={role:"dialog"},o.prototype.childViewContainer='[role="grid"]',o.prototype.childView=e("views/duplicates/row"),o.prototype.templateHelpers=function(){return{size:this.toMerge.size()}},o.prototype.behaviors={Dialog:{}},o.prototype.collectionEvents={"contacts:merge":"render"},o.prototype.initialize=function(){var t;return t=e("application").contacts,this.collection=new n(null,{collection:t}),this.toMerge=new BackboneProjections.Filtered(this.collection,{filter:function(t){return t.isMergeable()}}),this.bindEntityEvents(this.collection,this.getOption("collectionEvents"))},o}(Mn.CompositeView)}),require.register("views/duplicates/row",function(t,e,o){var a,n,r=function(t,e){function o(){this.constructor=t}for(var a in e)i.call(e,a)&&(t[a]=e[a]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty,s=[].indexOf||function(t){for(var e=0,o=this.length;o>e;e++)if(e in this&&this[e]===t)return e;return-1};a=e("views/models/contact"),o.exports=n=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return r(o,t),o.prototype.template=e("views/templates/duplicates/row"),o.prototype.tagName=function(){return this.model.has("result")?"div":"dl"},o.prototype.className=function(){return this.model.has("result")?"merged":""},o.prototype.attributes=function(){return{role:this.model.has("result")?"row":"rowgroup"}},o.prototype.ui={submit:'[type="submit"]',dismiss:".cancel"},o.prototype.modelEvents={change:"render","contacts:merge":"onContactsMerge"},o.prototype.events={"click @ui.submit":"merge",'click [type="checkbox"]':"check","click @ui.dismiss":"dismiss"},o.prototype.serializeData=function(){var t;return t=this.model.has("result")?new a({"new":!1},{model:this.model.get("result")}):void 0,_.extend(o.__super__.serializeData.apply(this,arguments),{candidates:this.model.get("candidates").map(function(t){return new a({"new":!1},{model:t})}),selected:this.model.get("candidates").map(function(t){return function(e){return s.call(t.model.get("toMerge"),e)>=0}}(this)),isMergeable:this.model.isMergeable(),result:t,merging:this.merging})},o.prototype.check=function(t){var e;return e=$(t.target),this.model.selectCandidate(e.val(),e.is(":checked"))},o.prototype.dismiss=function(){return this.model.collection.remove(this.model)},o.prototype.onContactsMerge=function(){return this.merging=!1,this.render()},o.prototype.merge=function(){var t,o,a;return this.triggerMethod("merge"),this.merging=!0,this.$("button, input").prop("disabled",!0),_.defer(function(t){return function(){return t.ui.submit.attr("aria-busy",!0)}}(this)),a=this.model.buildMergeOptions(),0===Object.keys(a).length?this.model.merge():(t=e("views/contacts/merge"),o=e("application").layout,o.showChildView("alerts",new t({model:this.model})))},o}(Mn.ItemView)}),require.register("views/labels/filter",function(t,e,o){var a,n=function(t,e){function o(){this.constructor=t}for(var a in e)r.call(e,a)&&(t[a]=e[a]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},r={}.hasOwnProperty;o.exports=a=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.template=e("views/templates/labels/filter"),o.prototype.tagName="li",o.prototype.serializeData=function(){var t,a,n,r;return t=e("application"),n=new RegExp("tag:"+this.model.get("name"),"i"),a=null!=(r=t.model.get("filter"))?r.match(n):void 0,_.extend({},o.__super__.serializeData.apply(this,arguments),{selected:!!a})},o}(Mn.ItemView)}),require.register("views/labels/index",function(t,e,o){var a,n,r,i=function(t,e){function o(){this.constructor=t}for(var a in e)s.call(e,a)&&(t[a]=e[a]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},s={}.hasOwnProperty;a=BackboneProjections.Filtered,r=e("config").search.pattern("tag"),o.exports=n=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return i(o,t),o.prototype.template=e("views/templates/labels"),o.prototype.tagName="fieldset",o.prototype.ui={navigate:"a"},o.prototype.behaviors={Navigator:{}},o.prototype.childViewContainer="ul",o.prototype.childView=e("views/labels/filter"),o.prototype.modelEvents={"change:filter":"toggleSelected"},o.prototype.initialize=function(){var t;return t=e("application"),this.collection=new a(t.tags,{filter:function(e){return null!=t.contacts.tagMap[e.get("name")]}}),this.collection.listenTo(t.contacts,{reset:this.collection.update,update:this.collection.update,"change:tags":this.collection.update})},o.prototype.toggleSelected=function(t,e){var o,a,n;return n=null!=e&&null!=(a=e.match(r))?a[1]:void 0,o=n?this.collection.find({name:n}).id:"all",this.$("a:not([data-id='"+o+"'])").attr("aria-checked",!1).find("input").prop("checked",!1),this.$("a[data-id='"+o+"']").attr("aria-checked",!0).find("input").prop("checked",!0)},o}(Mn.CompositeView)}),require.register("views/models/app",function(t,e,o){var a,n,r,i,s=function(t,e){function o(){this.constructor=t}for(var a in e)c.call(e,a)&&(t[a]=e[a]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},c={}.hasOwnProperty,l=[].indexOf||function(t){for(var e=0,o=this.length;o>e;e++)if(e in this&&this[e]===t)return e;return-1};r=e("views/contacts/merge"),n=e("views/models/merge"),i=void 0,o.exports=a=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return s(o,t),o.prototype.defaults={dialog:!1,filter:void 0,scored:!1,errors:void 0},o.prototype.viewEvents={"settings:sort":"updateSortSetting","settings:upload":"onUploadFile","select:all":"selectAll","select:none":"unselectAll","bulk:delete":"bulkDelete","bulk:export":function(){return this.bulkExport()},"bulk:merge":"bulkMerge","contacts:export":function(){return this.bulkExport(!0)}},o.prototype.initialize=function(){return i=e("application"),this.set("selected",[]),this.listenTo(this,"change:filter",function(t,o){return this.unselectAll(),this.set("scored",e("config").search.pattern("text").test(o))})},o.prototype.select=function(t){var e;return e=this.attributes.selected.slice(0),e.push(t),this.set({selected:e})},o.prototype.unselect=function(t){var e;return e=_.without(this.attributes.selected,t),this.set({selected:e})},o.prototype.selectAll=function(){var t;return t=i.filtered.get({tagged:!0}).map(function(t){return t.id}),this.set({selected:t})},o.prototype.unselectAll=function(){return this.set({selected:[]})},o.prototype.bulkDelete=function(){var t,e;return t=this.attributes.selected,e=function(t){return function(e){return t.unselect(e.id)}}(this),i.contacts.chain().filter(function(e){var o;return o=e.id,l.call(t,o)>=0}).invoke("destroy",{wait:!0,success:e}).value()},o.prototype.bulkMerge=function(){var t,e,o;return t=i.contacts.filter(function(t){return function(e){var o;return o=e.id,l.call(t.attributes.selected,o)>=0}}(this)),o=new n({candidates:t}),e=o.buildMergeOptions(),o.on("contacts:merge",function(t){return function(e,a){return t.unselectAll(),"abort"!==a?t.select(o.get("result").id):void 0}}(this)),0===Object.keys(e).length?o.merge():i.layout.showChildView("alerts",new r({model:o}))},o.prototype.bulkExport=function(t){var e,o,a,n;return a=this.attributes.selected,e=t?i.contacts.size():a.length,n=[],o=_.after(e,function(){var t,e;return e=moment().format("YYYYMMDD"),t=new Blob(n,{type:"text/plain;charset=utf-8"}),saveAs(t,e+"_cozy_contacts_"+n.length+".vcf")}),i.contacts.chain().filter(function(e){var o;return t||(o=e.id,l.call(a,o)>=0)}).invoke("toVCF",function(t){return n.push(t),o()}).value()},o.prototype.updateSortSetting=function(t){return this.model.save("sort",t)},o.prototype.onUploadFile=function(t){var e;return/.+\.(vcf|vcard)$/i.test(t.name)?(this.trigger("before:import"),e=new FileReader,e.readAsText(t),e.onloadend=function(t){return function(){var o,a;return a=e.result,o=/^BEGIN:VCARD/,o.test(a)?i.contacts.importFromVCF(a):t.set("errors",{upload:"error upload wrong filetype"})}}(this)):this.set("errors",{upload:"error upload wrong filetype"})},o}(Backbone.ViewModel)}),require.register("views/models/contact",function(t,e,o){var a,n,r,i,s,c=function(t,e){function o(){this.constructor=t}for(var a in e)l.call(e,a)&&(t[a]=e[a]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},l={}.hasOwnProperty,d=[].indexOf||function(t){for(var e=0,o=this.length;o>e;e++)if(e in this&&this[e]===t)return e;
return-1};i=BackboneProjections.Filtered,n=e("config").contact,a=e("lib/contact_helper"),s=null,o.exports=r=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return c(o,t),o.prototype.defaults={"new":!1,edit:!1},o.prototype.map={avatar:"_attachments",name:"n"},o.prototype.events={"before:save":"syncDatapoints",save:"onSave",reset:"onReset"},o.prototype.viewEvents={"edit:cancel":"reset","tags:update":"updateTags","tags:add":"addNewTag","form:field:add":"onAddField","form:submit":function(){return this.save()},"export":"downloadAsVCF","delete":function(){return this.destroy()}},o.prototype.proxy=["toString","toHighlightedString","match"],o.prototype.initialize=function(){return s=e("application"),this._setRef(),this.getDatapoints=_.memoize(this.getDatapoints,function(t){return this.attributes.edit?"edit-"+t:t}),this.listenTo(this,"change:edit",function(t,e){var o,a,n;if(e){o=this.getDatapoints.cache,n=[];for(a in o)/^edit/.test(a)&&n.push(delete o[a]);return n}})},o.prototype.toJSON=function(){var t;return t=o.__super__.toJSON.apply(this,arguments),delete t.datapoints,t.xtras=this.getDatapoints("xtras").toJSON(),_.reduce(n.datapoints.main,function(t){return function(e,o){return e[o]=t.getDatapoints(o).toJSON(),e}}(this),t)},o.prototype.getMappedAvatar=function(t){return(null!=t?t.picture:void 0)?"contacts/"+this.model.id+"/picture.png?revpos="+t.picture.revpos:null},o.prototype.saveMappedAvatar=function(){var t,e;return t={},e=this.get("avatar"),null!=e&&null==e.match(/contacts\/.+\/picture.png/)&&(t.avatar=e.split(",")[1]),t},o.prototype.getMappedName=function(t){var e,o,a,n,r,i,s;return i=t.split(";"),o=i[0],e=i[1],a=i[2],r=i[3],s=i[4],n={first:e,given:o},a&&(n.middle=a),r&&(n.prefix=r),s&&(n.suffix=s),n},o.prototype.saveMappedName=function(){var t,e;return e=_.clone(this.get("name")),(t={}).n=[e.given,e.first,e.middle,e.prefix,e.suffix].join(";"),t},o.prototype._setRef=function(){return this.set("ref",this.model.cid)},o.prototype.onAddField=function(t){return d.call(n.xtras,t)>=0?this.set(t,""):void 0},o.prototype.getDatapoints=function(t){var e,o;return e=function(e){var o;return d.call(n.datapoints.main,t)>=0?e.get("name")===t:(o=e.get("name"),d.call(n.datapoints.main,o)<0)},this.attributes.edit?(o=this.model.get("datapoints").filter(e).map(function(t){return t.clone()}),new Backbone.Collection(o)):new i(this.model.get("datapoints"),{filter:e})},o.prototype.syncDatapoints=function(){var t,e,o,n,r,i;t=this.getDatapoints.cache,o=this.model.get("datapoints"),r=[],i=t.__data__;for(n in i)e=i[n],/^edit/.test(n)&&(r=r.concat(a.getNonEmptyDatapoints(e)));return o.reset(r)},o.prototype.updateTags=function(t){return this.model.save({tags:t})},o.prototype.addNewTag=function(t){var e,o;return e=s.contacts,o=s.tags,e.tagMap[t]=!0,o.create({name:t},{wait:!0,success:function(e){return function(){return o=e.model.get("tags").concat(t),e.model.save({tags:o})}}(this)})},o.prototype.onSave=function(){return this.get("new")?s.contacts.add(this.model):void 0},o.prototype.onReset=function(){return this._setRef()},o.prototype.downloadAsVCF=function(){var t;return t=this.model.get("fn"),this.model.toVCF(function(e){var o;return o=new Blob([e],{type:"text/plain;charset=utf-8"}),saveAs(o,t+".vcf")})},o}(Backbone.ViewModel)}),require.register("views/models/merge",function(t,e,o){var a,n,r,i,s,c,l=function(t,e){function o(){this.constructor=t}for(var a in e)d.call(e,a)&&(t[a]=e[a]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},d={}.hasOwnProperty,u=[].indexOf||function(t){for(var e=0,o=this.length;o>e;e++)if(e in this&&this[e]===t)return e;return-1};r=e("models/contact"),s=e("views/models/contact"),n=e("lib/compare_contacts"),i=e("lib/contact_helper"),a=["org","title","department","bday","nickname"],o.exports=c=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return l(o,t),o.prototype.initialize=function(t){return null!=t.candidates?this.set("toMerge",t.candidates.slice(0)):void 0},o.prototype.selectCandidate=function(t,e){return e?this.isCandidateSelected(t)||this.attributes.toMerge.push(this.get("candidates")[t]):this.unselectCandidate(t),this.trigger("change",this)},o.prototype.unselectCandidate=function(t){return this.attributes.toMerge=this.attributes.toMerge.filter(function(e){return function(o){return o!==e.get("candidates")[t]}}(this))},o.prototype.isCandidateSelected=function(t){var e;return e=this.get("candidates")[t],u.call(this.get("toMerge"),e)>=0},o.prototype.toMergeAsJson=function(){return this.get("toMerge").map(function(t){return t.toJSON()})},o.prototype.isMergeable=function(){return!this.has("result")&&this.get("toMerge").length>1},o.prototype.buildMergeOptions=function(){var t,e,o,n,r,i;for(r={},e=a.concat(["avatar","fullname"]),o=0,n=e.length;n>o;o++)t=e[o],i=[],this.get("toMerge").forEach(function(e,o){var a,n;return n="avatar"===t?e.has("_attachments")?"contacts/"+e.get("id")+"/picture.png":null:"fullname"===t?e.toString({pre:"<b>",post:"</b>"}):e.get(t),a=function(t){return t.value===n},null==n||""===n||i.some(a)?void 0:i.push({value:n,index:o})}),i.length>0&&this.set(t,i[0].index),i.length>1&&(r[t]=i);return this.set("mergeOptions",r),r},o.prototype.merge=function(t){var e,o,s,c,l,d,u,p,m;if(p=this.toMergeAsJson(),p.length<=1)return t(new Error("not enought contact to merge."));for(d={datapoints:[],tags:[]},p.forEach(function(t){return n.mergeContacts(d,t)}),delete d._id,delete d.id,delete d.revision,delete d._rev,delete d._attachments,s=a,this.has("fullname")&&(this.set("n",this.get("fullname")),this.set("fn",this.get("fullname")),s=s.concat(["n","fn"])),c=0,l=s.length;l>c;c++)o=s[c],this.has(o)&&(d[o]=p[this.get(o)][o]);return u=new r(d,{parse:!0}),e=function(e){return function(o){return o?t(o):(e.listenToOnce(u,"sync",e.afterSyncResult.bind(e)),u.save(),null!=t?t():void 0)}}(this),this.has("avatar")?(m="contacts/"+p[this.get("avatar")].id+"/picture.png",i.imgUrl2DataUrl(m,function(t,o){return u.set("avatar",o.split(",")[1]),e(t)})):e()},o.prototype.afterSyncResult=function(t){return async.each(this.get("toMerge"),function(t,e){return t.destroy({success:function(){return e()},error:function(t,o,a){return e(o)}})},function(o){return function(a){return a?(console.error(a),o.trigger("contacts:merge",o,a)):(o.attributes.toMerge=[],o.attributes.candidates=[],o.set("result",t),o.trigger("contacts:merge",o,null)),e("application").contacts.add(t)}}(this))},o}(Backbone.ViewModel)}),require.register("views/settings/index",function(t,e,o){var a,n,r,i=function(t,e){function o(){this.constructor=t}for(var a in e)s.call(e,a)&&(t[a]=e[a]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},s={}.hasOwnProperty;n=e("config").settings,r=e("lib/i18n"),o.exports=a=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return i(o,t),o.prototype.template=e("views/templates/settings"),o.prototype.tagName="section",o.prototype.className="settings",o.prototype.attributes={role:"dialog"},o.prototype.behaviors={Dialog:{}},o.prototype.ui={sort:'[name="sort"]',"import":"button.import",upload:'[type="file"]',"export":'[formaction="contacts/export"]',feedback:".feedback"},o.prototype.triggers={"click @ui.export":"contacts:export"},o.prototype.events={"change @ui.sort":"updateSort","click @ui.import":"triggerUploader","change @ui.upload":"onUploadFile"},o.prototype.modelEvents={"change:errors":"render","before:import":"onBeforeImport"},o.prototype.initialize=function(){return Mn.bindEntityEvents(this.model,this,this.model.viewEvents),this.listenTo(e("application").contacts,{"before:import:progress":this.onBeforeImportProgress,"import:progress":this.onProgressImport,"import":this.onProgressEnd})},o.prototype.serializeData=function(){return _.extend({},o.__super__.serializeData.apply(this,arguments),n,{locale:e("imports").locale})},o.prototype.updateSort=function(t){return t.preventDefault(),t.stopPropagation(),this.triggerMethod("settings:sort",t.currentTarget.value)},o.prototype.triggerUploader=function(t){return t.preventDefault(),t.stopPropagation(),this.ui.upload.trigger("click")},o.prototype.onUploadFile=function(t){return t.preventDefault(),t.stopPropagation(),this.triggerMethod("settings:upload",t.currentTarget.files[0])},o.prototype.onBeforeImport=function(){return this.ui["import"].prop("disabled",!0),this.ui.feedback.empty()},o.prototype.onBeforeImportProgress=function(t){var e;return this.ui.progress=$("<progress/>",{max:t,value:0}),this.ui.counter=$("<span/>",{text:0}),e=$("<div/>",{text:"/"+t}).prepend(this.ui.counter),this.ui.progress.appendTo(this.ui.feedback),e.appendTo(this.ui.feedback)},o.prototype.onProgressImport=function(t){return this.ui.progress.val(t),this.ui.counter.text(t)},o.prototype.onProgressEnd=function(t){return this.ui.feedback.empty().text(r("settings in-out import result",{smart_count:t})),this.ui["import"].prop("disabled",!1)},o}(Mn.ItemView)}),require.register("views/templates/contacts/card",function(e,o,a){var n=function(e){var o,a=[],n=e||{};return function(e,n,r,i,s){a.push('<div role="separator"></div><div class="wrapper"><div role="contentinfo">'),n&&function(){var t=i;if("number"==typeof t.length)for(var e=0,o=t.length;o>e;e++){var n=t[e];a.push("<datalist"+jade.attr("id","list-"+e,!0,!1)+">"),function(){var t=n;if("number"==typeof t.length)for(var e=0,o=t.length;o>e;e++){var r=t[e],i=r.split(":");a.push("<option"+jade.attr("value",i[0],!0,!1)+jade.attr("data-name",i[1],!0,!1)+"></option>")}else{var o=0;for(var e in t){o++;var r=t[e],i=r.split(":");a.push("<option"+jade.attr("value",i[0],!0,!1)+jade.attr("data-name",i[1],!0,!1)+"></option>")}}}.call(this),a.push("</datalist>")}else{var o=0;for(var e in t){o++;var n=t[e];a.push("<datalist"+jade.attr("id","list-"+e,!0,!1)+">"),function(){var t=n;if("number"==typeof t.length)for(var e=0,o=t.length;o>e;e++){var r=t[e],i=r.split(":");a.push("<option"+jade.attr("value",i[0],!0,!1)+jade.attr("data-name",i[1],!0,!1)+"></option>")}else{var o=0;for(var e in t){o++;var r=t[e],i=r.split(":");a.push("<option"+jade.attr("value",i[0],!0,!1)+jade.attr("data-name",i[1],!0,!1)+"></option>")}}}.call(this),a.push("</datalist>")}}}.call(this),a.push('<div role="img"></div><div class="data"></div><aside><ul>'),n?(r?a.push('<li><button type="submit"'+jade.attr("data-next","contacts/"+e,!0,!1)+' class="outline"><i class="fa fa-check"></i><span>'+jade.escape(null==(o=t("card actions save"))?"":o)+"</span></button></li>"):a.push('<li><button type="submit" class="outline"><i class="fa fa-plus"></i><span>'+jade.escape(null==(o=t("card actions create"))?"":o)+"</span></button></li>"),a.push('<li><a role="button"'+jade.attr("href",r?"contacts/"+e:"contacts",!0,!1)+jade.attr("data-confirm",'{"event":"edit:cancel","title":"'+t("card confirm cancel title")+'","message":"'+t("card confirm cancel message")+'","btn_ok":"'+t("card confirm cancel ok")+'","btn_cancel":"'+t("card confirm cancel cancel")+'"}',!0,!1)+' class="cancel outline secondary"><i class="fa fa-times"></i><span>'+jade.escape(null==(o=t("card actions cancel"))?"":o)+"</span></a></li>")):a.push('<li><a role="button"'+jade.attr("href","contacts/"+e+"/edit",!0,!1)+' class="edit outline secondary"><i class="fa fa-pencil"></i><span>'+jade.escape(null==(o=t("card actions edit"))?"":o)+'</span></a></li><li><button formaction="contact/export" class="outline secondary"><i class="fa fa-upload"></i><span>'+jade.escape(null==(o=t("card actions export"))?"":o)+'</span></button></li><li><button class="delete outline danger special"><i class="fa fa-trash"></i><span>'+jade.escape(null==(o=t("card actions delete"))?"":o)+"</span></button></li>"),a.push('<li class="tags"></li></ul></aside></div></div>')}.call(this,"_id"in n?n._id:"undefined"!=typeof _id?_id:void 0,"edit"in n?n.edit:"undefined"!=typeof edit?edit:void 0,"id"in n?n.id:"undefined"!=typeof id?id:void 0,"lists"in n?n.lists:"undefined"!=typeof lists?lists:void 0,"undefined"in n?n.undefined:void 0),a.join("")};"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof a&&a&&a.exports&&(a.exports=n)}),require.register("views/templates/contacts/components/add_field_dropdown",function(e,o,a){var n=function(e){var o,a=[],n=e||{};return function(e){a.push('<dt role="button" class="outline secondary caret">'+jade.escape(null==(o=t("card actions add select"))?"":o)+'<i class="fa fa-caret-down"></i></dt><dd role="listbox"><ul>'),null==e&&a.push('<li role="option"><button value="bday" class="link">'+jade.escape(null==(o=t("card actions add birthday"))?"":o)+"</button></li>"),a.push('<li role="option"><button value="social" class="link">'+jade.escape(null==(o=t("card actions add social"))?"":o)+'</button></li><li role="option"><button value="url" class="link">'+jade.escape(null==(o=t("card actions add link"))?"":o)+'</button></li><li role="option"><button value="other" class="link">'+jade.escape(null==(o=t("card actions add other"))?"":o)+"</button></li></ul></dd>")}.call(this,"bday"in n?n.bday:"undefined"!=typeof bday?bday:void 0),a.join("")};"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof a&&a&&a.exports&&(a.exports=n)}),require.register("views/templates/contacts/components/avatar",function(t,e,o){var a=function(t){var e,o=[],a=t||{};return function(t,a,n){t?o.push("<img"+jade.attr("src",t,!0,!1)+' class="avatar"/>'):o.push("<span"+jade.attr("style","background-color:"+a,!0,!1)+' class="avatar initials">'+jade.escape(null==(e=n)?"":e)+"</span>")}.call(this,"avatar"in a?a.avatar:"undefined"!=typeof avatar?avatar:void 0,"bg"in a?a.bg:"undefined"!=typeof bg?bg:void 0,"initials"in a?a.initials:"undefined"!=typeof initials?initials:void 0),o.join("")};"function"==typeof define&&define.amd?define([],function(){return a}):"object"==typeof o&&o&&o.exports&&(o.exports=a)}),require.register("views/templates/contacts/components/data",function(e,o,a){var n=function(e){var o,a=[],n={},r=e||{};return function(e,r,i,s,c,l,d,u,p,m){n.formatJob=o=function(t,e,n){this&&this.block,this&&this.attributes||{};t&&a.push(jade.escape(null==(o=t)?"":o)),t&&e&&a.push(" - "),e&&a.push(jade.escape(null==(o=e)?"":o)),(e&&n||t&&n)&&a.push(" "),n&&a.push("("+jade.escape(null==(o=n)?"":o)+")")},n.input=o=function(e,n){var r=(this&&this.block,this&&this.attributes||{}),i=t("datapoint label "+e.replace("."," ")),s=[e,d].join("-"),c=r.placeholder?t("datapoint placeholder "+e):!1,l=r.value;a.push("<label"+jade.attr("for",s,!0,!1)+' class="group"><span class="type">'+jade.escape(null==(o=i)?"":o)+"</span>"),"textarea"==n?a.push("<textarea"+jade.attr("id",s,!0,!1)+jade.attr("name",e,!0,!1)+' class="value">'+jade.escape(null==(o=l)?"":o)+"</textarea>"):a.push("<input"+jade.attr("id",s,!0,!1)+jade.attr("name",e,!0,!1)+' type="text"'+jade.attr("value",l,!0,!1)+jade.attr("placeholder",c,!0,!1)+jade.cls(["value",l?void 0:"empty"],[null,!0])+'/><button class="link clear"><div class="fa fa-times"></div></button>'),a.push("</label>")},r?(n.input.call({attributes:{value:jade.escape(s.prefix)}},"name.prefix"),n.input.call({attributes:{value:jade.escape(s.first)}},"name.first"),n.input.call({attributes:{value:jade.escape(s.middle)}},"name.middle"),n.input.call({attributes:{value:jade.escape(s.given)}},"name.given"),n.input.call({attributes:{value:jade.escape(s.suffix)}},"name.suffix"),a.push('<fieldset data-type="infos" class="block">'),n.input.call({attributes:{value:jade.escape(l),placeholder:!0}},"org"),n.input.call({attributes:{value:jade.escape(e),placeholder:!0}},"department"),n.input.call({attributes:{value:jade.escape(p),placeholder:!0}},"title"),a.push("</fieldset>")):(a.push("<header><h1>"+(null==(o=i)?"":o)+'</h1><ul class="tags">'),function(){var t=u;if("number"==typeof t.length)for(var e=0,n=t.length;n>e;e++){var r=t[e];a.push("<li>"+jade.escape(null==(o=r)?"":o)+"</li>")}else{var n=0;for(var e in t){n++;var r=t[e];a.push("<li>"+jade.escape(null==(o=r)?"":o)+"</li>")}}}.call(this),a.push('</ul></header><ul data-type="infos" class="block">'),(p||l||e||c)&&((p||l||e)&&(a.push("<li>"),n.formatJob(p,l,e),a.push("</li>")),c&&a.push("<li>"+jade.escape(null==(o=c)?"":o)+"</li>")),a.push("</ul>")),a.push('<div data-type="tel" class="block datapoints"></div><div data-type="email" class="block datapoints"></div><div data-type="adr" class="block datapoints"></div><div class="block"><div data-type="xtras" class="datapoints"></div><div data-type="xtras-infos"></div>'),r&&n.input.call({attributes:{value:jade.escape(c)}},"note","textarea"),a.push("</div>"),r&&a.push('<div class="actions"></div>')}.call(this,"department"in r?r.department:"undefined"!=typeof department?department:void 0,"edit"in r?r.edit:"undefined"!=typeof edit?edit:void 0,"fullname"in r?r.fullname:"undefined"!=typeof fullname?fullname:void 0,"name"in r?r.name:"undefined"!=typeof name?name:void 0,"note"in r?r.note:"undefined"!=typeof note?note:void 0,"org"in r?r.org:"undefined"!=typeof org?org:void 0,"ref"in r?r.ref:"undefined"!=typeof ref?ref:void 0,"tags"in r?r.tags:"undefined"!=typeof tags?tags:void 0,"title"in r?r.title:"undefined"!=typeof title?title:void 0,"undefined"in r?r.undefined:void 0),a.join("")};"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof a&&a&&a.exports&&(a.exports=n)}),require.register("views/templates/contacts/components/datapoint",function(e,o,a){var n=function(e){var o,a=[],n={},r=e||{};return function(e,r,i,s,c,l){n.formatPoint=o=function(t,e){this&&this.block,this&&this.attributes||{};if(e)switch(t.type.toLowerCase()){case"home":var e="home";break;case"work":var e="building";break;default:switch(t.name){case"tel":var e="phone";break;case"email":var e="envelope";break;default:var e=!1}}a.push("<i"+jade.cls(["type",e?"fa fa-"+e:!1],[null,!0])+">"+jade.escape(null==(o=t.type)?"":o)+'&nbsp;</i><span class="value">'+(null==(o=t.value.replace(/\n/g,"<br>"))?"":o)+"</span>")},n.groupInput=o=function(e,n,i){var s=(this&&this.block,this&&this.attributes||{}),c=s.placeholder?t("datapoint placeholder "+("default"==r?e.name:r)):!1,d=n+"."+i;a.push("<input"+jade.attr("id",""+d+".type-"+l,!0,!1)+jade.attr("name",""+d+".type",!0,!1)+' type="text"'+jade.attr("value",e.type,!0,!1)+jade.attr("list","list-"+r,!0,!1)+' class="type"/>'),"adr"==n?a.push("<textarea"+jade.attr("id",""+d+".value-"+l,!0,!1)+jade.attr("name",""+d+".value",!0,!1)+jade.cls(["value",e.value?void 0:"empty"],[null,!0])+">"+jade.escape(null==(o=e.value)?"":o)+"</textarea>"):a.push("<input"+jade.attr("id",""+d+".value-"+l,!0,!1)+jade.attr("name",""+d+".value",!0,!1)+' type="text"'+jade.attr("value",e.value,!0,!1)+jade.attr("placeholder",c,!0,!1)+jade.cls(["value",e.value?void 0:"empty"],[null,!0])+"/>"),a.push('<button class="link delete"><div class="fa fa-trash"></div></button><input'+jade.attr("id",""+d+".name-"+l,!0,!1)+jade.attr("name",""+d+".name",!0,!1)+' type="hidden"'+jade.attr("value",e.name,!0,!1)+' class="name"/>')},e?n.groupInput.call({attributes:{placeholder:!0}},c,s,i):n.formatPoint(c)}.call(this,"edit"in r?r.edit:"undefined"!=typeof edit?edit:void 0,"entity"in r?r.entity:"undefined"!=typeof entity?entity:void 0,"index"in r?r.index:"undefined"!=typeof index?index:void 0,"name"in r?r.name:"undefined"!=typeof name?name:void 0,"point"in r?r.point:"undefined"!=typeof point?point:void 0,"ref"in r?r.ref:"undefined"!=typeof ref?ref:void 0),a.join("")};"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof a&&a&&a.exports&&(a.exports=n)}),require.register("views/templates/contacts/components/edit_tags",function(e,o,a){var n=function(e){var o,a=[];return a.push('<dt role="button" class="outline secondary caret"><i class="fa fa-tags fa-flip-horizontal"></i>'+jade.escape(null==(o=t("card actions labels"))?"":o)+'<i class="fa fa-caret-down"></i></dt><dd><fieldset><legend>'+jade.escape(null==(o=t("card actions labels add"))?"":o)+'</legend><ul></ul><div aria-expanded="false" class="create"><label for="tag-new"><input type="text" name="name"/></label><button><i class="fa fa-plus"></i>'+jade.escape(null==(o=t("card actions labels create"))?"":o)+"</button></div></fieldset></dd>"),a.join("")};"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof a&&a&&a.exports&&(a.exports=n)}),require.register("views/templates/contacts/components/tag",function(t,e,o){var a=function(t){var e,o=[],a=t||{};return function(t,a,n){var r=t.slice(-6);o.push("<label"+jade.attr("for","tag-"+r,!0,!1)+'><input type="checkbox"'+jade.attr("id","tag-"+r,!0,!1)+' name="tags"'+jade.attr("value",t,!0,!1)+jade.attr("checked",n,!0,!1)+'/><span class="label">'+jade.escape(null==(e=a)?"":e)+"</span></label>")}.call(this,"_id"in a?a._id:"undefined"!=typeof _id?_id:void 0,"name"in a?a.name:"undefined"!=typeof name?name:void 0,"selected"in a?a.selected:"undefined"!=typeof selected?selected:void 0),o.join("")};"function"==typeof define&&define.amd?define([],function(){return a}):"object"==typeof o&&o&&o.exports&&(o.exports=a)}),require.register("views/templates/contacts/components/xtras",function(e,o,a){var n=function(e){var o,a=[],n={},r=e||{};return function(e,r,i,s){n.formatPoint=o=function(t,e){this&&this.block,this&&this.attributes||{};if(e)switch(t.type.toLowerCase()){case"home":var e="home";break;case"work":var e="building";break;default:switch(t.name){case"tel":var e="phone";break;case"email":var e="envelope";break;default:var e=!1}}a.push("<i"+jade.cls(["type",e?"fa fa-"+e:!1],[null,!0])+">"+jade.escape(null==(o=t.type)?"":o)+'&nbsp;</i><span class="value">'+(null==(o=t.value.replace(/\n/g,"<br>"))?"":o)+"</span>")},n.input=o=function(e,n){var i=(this&&this.block,this&&this.attributes||{}),s=t("datapoint label "+e.replace("."," ")),c=[e,r].join("-"),l=i.placeholder?t("datapoint placeholder "+e):!1,d=i.value;a.push("<label"+jade.attr("for",c,!0,!1)+' class="group"><span class="type">'+jade.escape(null==(o=s)?"":o)+"</span>"),"textarea"==n?a.push("<textarea"+jade.attr("id",c,!0,!1)+jade.attr("name",e,!0,!1)+' class="value">'+jade.escape(null==(o=d)?"":o)+"</textarea>"):a.push("<input"+jade.attr("id",c,!0,!1)+jade.attr("name",e,!0,!1)+' type="text"'+jade.attr("value",d,!0,!1)+jade.attr("placeholder",l,!0,!1)+jade.cls(["value",d?void 0:"empty"],[null,!0])+'/><button class="link clear"><div class="fa fa-times"></div></button>'),a.push("</label>")},function(){var o=s;if("number"==typeof o.length)for(var r=0,i=o.length;i>r;r++){var c=o[r];if(e)n.input.call({attributes:{value:jade.escape(c),placeholder:!0}},r,"text");else{var l={type:t("datapoint label "+r),value:c};a.push('<li class="group">'),n.formatPoint(l),a.push("</li>")}}else{var i=0;for(var r in o){i++;var c=o[r];if(e)n.input.call({attributes:{value:jade.escape(c),placeholder:!0}},r,"text");else{var l={type:t("datapoint label "+r),value:c};a.push('<li class="group">'),n.formatPoint(l),a.push("</li>")}}}}.call(this)}.call(this,"edit"in r?r.edit:"undefined"!=typeof edit?edit:void 0,"ref"in r?r.ref:"undefined"!=typeof ref?ref:void 0,"undefined"in r?r.undefined:void 0,"xtras"in r?r.xtras:"undefined"!=typeof xtras?xtras:void 0),a.join("")};"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof a&&a&&a.exports&&(a.exports=n)}),require.register("views/templates/contacts/helpers",function(t,e,o){var a=function(t){var e=[];return e.join("")};"function"==typeof define&&define.amd?define([],function(){return a}):"object"==typeof o&&o&&o.exports&&(o.exports=a)}),require.register("views/templates/contacts/index",function(t,e,o){var a=function(t){var e,o=[],a=t||{};return function(t){t&&o.push('<dt role="columnheader">'+jade.escape(null==(e=t)?"":e)+"</dt><dd><ul></ul></dd>")}.call(this,"char"in a?a["char"]:"undefined"!=typeof char?char:void 0),o.join("")};"function"==typeof define&&define.amd?define([],function(){return a}):"object"==typeof o&&o&&o.exports&&(o.exports=a)}),require.register("views/templates/contacts/merge",function(e,o,a){var n=function(e){var o,a=[],n={},r=e||{};return function(e){n.radio=o=function(t,n){this&&this.block,this&&this.attributes||{};a.push("<ul"+jade.cls(["avatar"==n?"avatars":""],[!0])+">"),function(){var r=t;if("number"==typeof r.length)for(var i=0,s=r.length;s>i;i++){var c=r[i],l=c.index,d=["merge",n,l].join("-"),u=e[n]==l;a.push("<li><label"+jade.attr("for",d,!0,!1)+">"),"avatar"==n?a.push('<input type="radio"'+jade.attr("name",n,!0,!1)+jade.attr("value",l,!0,!1)+jade.attr("id",d,!0,!1)+jade.attr("checked",u,!0,!1)+"/><img"+jade.attr("src",c.value,!0,!1)+"/>"):(a.push('<span data-input="radio"><input type="radio"'+jade.attr("name",n,!0,!1)+jade.attr("value",l,!0,!1)+jade.attr("id",d,!0,!1)+jade.attr("checked",u,!0,!1)+"/><label"+jade.attr("for",d,!0,!1)+"></label></span><span>"),"fullname"==n?a.push(null==(o=c.value)?"":o):a.push(jade.escape(null==(o=c.value)?"":o)),a.push("</span>")),a.push("</label></li>")}else{var s=0;for(var i in r){s++;var c=r[i],l=c.index,d=["merge",n,l].join("-"),u=e[n]==l;a.push("<li><label"+jade.attr("for",d,!0,!1)+">"),"avatar"==n?a.push('<input type="radio"'+jade.attr("name",n,!0,!1)+jade.attr("value",l,!0,!1)+jade.attr("id",d,!0,!1)+jade.attr("checked",u,!0,!1)+"/><img"+jade.attr("src",c.value,!0,!1)+"/>"):(a.push('<span data-input="radio"><input type="radio"'+jade.attr("name",n,!0,!1)+jade.attr("value",l,!0,!1)+jade.attr("id",d,!0,!1)+jade.attr("checked",u,!0,!1)+"/><label"+jade.attr("for",d,!0,!1)+"></label></span><span>"),"fullname"==n?a.push(null==(o=c.value)?"":o):a.push(jade.escape(null==(o=c.value)?"":o)),a.push("</span>")),a.push("</label></li>")}}}.call(this),a.push("</ul>")},a.push('<div role="separator"></div><div class="wrapper"><div role="contentinfo">'),n.radio=o=function(t,n){this&&this.block,this&&this.attributes||{};a.push("<ul"+jade.cls(["avatar"==n?"avatars":""],[!0])+">"),function(){var r=t;if("number"==typeof r.length)for(var i=0,s=r.length;s>i;i++){var c=r[i],l=c.index,d=["merge",n,l].join("-"),u=e[n]==l;a.push("<li><label"+jade.attr("for",d,!0,!1)+">"),"avatar"==n?a.push('<input type="radio"'+jade.attr("name",n,!0,!1)+jade.attr("value",l,!0,!1)+jade.attr("id",d,!0,!1)+jade.attr("checked",u,!0,!1)+"/><img"+jade.attr("src",c.value,!0,!1)+"/>"):(a.push('<span data-input="radio"><input type="radio"'+jade.attr("name",n,!0,!1)+jade.attr("value",l,!0,!1)+jade.attr("id",d,!0,!1)+jade.attr("checked",u,!0,!1)+"/><label"+jade.attr("for",d,!0,!1)+"></label></span><span>"),"fullname"==n?a.push(null==(o=c.value)?"":o):a.push(jade.escape(null==(o=c.value)?"":o)),a.push("</span>")),a.push("</label></li>")}else{var s=0;for(var i in r){s++;var c=r[i],l=c.index,d=["merge",n,l].join("-"),u=e[n]==l;a.push("<li><label"+jade.attr("for",d,!0,!1)+">"),"avatar"==n?a.push('<input type="radio"'+jade.attr("name",n,!0,!1)+jade.attr("value",l,!0,!1)+jade.attr("id",d,!0,!1)+jade.attr("checked",u,!0,!1)+"/><img"+jade.attr("src",c.value,!0,!1)+"/>"):(a.push('<span data-input="radio"><input type="radio"'+jade.attr("name",n,!0,!1)+jade.attr("value",l,!0,!1)+jade.attr("id",d,!0,!1)+jade.attr("checked",u,!0,!1)+"/><label"+jade.attr("for",d,!0,!1)+"></label></span><span>"),"fullname"==n?a.push(null==(o=c.value)?"":o):a.push(jade.escape(null==(o=c.value)?"":o)),a.push("</span>")),a.push("</label></li>")}}}.call(this),a.push("</ul>")},a.push("<h1>"+jade.escape(null==(o=t("merge title"))?"":o)+"</h1><dl>"),null!=e.mergeOptions.avatar&&(a.push("<dt>"+jade.escape(null==(o=t("merge choose avatar"))?"":o)+"</dt><dd>"),n.radio(e.mergeOptions.avatar,"avatar"),a.push("</dd>")),null!=e.mergeOptions.fullname&&(a.push("<dt>"+jade.escape(null==(o=t("merge choose name"))?"":o)+"</dt><dd>"),n.radio(e.mergeOptions.fullname,"fullname"),a.push("</dd>")),null!=e.mergeOptions.nickname&&(a.push("<dt>"+jade.escape(null==(o=t("merge choose nickname"))?"":o)+"</dt><dd>"),n.radio(e.mergeOptions.nickname),a.push("</dd>")),(null!=e.mergeOptions.org||null!=e.mergeOptions.department||null!=e.mergeOptions.title)&&(a.push("<dt>"+jade.escape(null==(o=t("merge choose organisation"))?"":o)+"</dt><dd><dl>"),null!=e.mergeOptions.org&&(a.push("<dt>"+jade.escape(null==(o=t("merge choose org"))?"":o)+"</dt><dd>"),n.radio(e.mergeOptions.org,"org"),a.push("</dd>")),null!=e.mergeOptions.department&&(a.push("<dt>"+jade.escape(null==(o=t("merge choose department"))?"":o)+"</dt><dd>"),n.radio(e.mergeOptions.department,"department"),a.push("</dd>")),null!=e.mergeOptions.title&&(a.push("<dt>"+jade.escape(null==(o=t("merge choose title"))?"":o)+"</dt><dd>"),n.radio(e.mergeOptions.title,"title"),a.push("</dd>")),a.push("</dl></dd>")),null!=e.mergeOptions.bday&&(a.push("<dt>"+jade.escape(null==(o=t("merge choose birthday"))?"":o)+"</dt><dd>"),n.radio(e.mergeOptions.bday,"bday"),a.push("</dd>")),a.push('</dl><nav><ul class="actions"><li><button type="submit"><div class="fa fa-code-fork"></div><span>'+jade.escape(null==(o=t("merge actions merge"))?"":o)+'</span></button></li><li><button class="cancel outline secondary"><span>'+jade.escape(null==(o=t("merge actions cancel"))?"":o)+"</span></button></li></ul></nav></div></div>")}.call(this,"model"in r?r.model:"undefined"!=typeof model?model:void 0),a.join("")};"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof a&&a&&a.exports&&(a.exports=n)}),require.register("views/templates/contacts/row",function(t,e,o){var a=function(t){var e,o=[],a={},r=t||{};return function(t,n,r,i,s,c,l,d,u,p){if(a.formatPoint=e=function(t,a){this&&this.block,this&&this.attributes||{};if(a)switch(t.type.toLowerCase()){case"home":var a="home";break;case"work":var a="building";break;default:switch(t.name){case"tel":var a="phone";break;case"email":var a="envelope";break;default:var a=!1}}o.push("<i"+jade.cls(["type",a?"fa fa-"+a:!1],[null,!0])+">"+jade.escape(null==(e=t.type)?"":e)+'&nbsp;</i><span class="value">'+(null==(e=t.value.replace(/\n/g,"<br>"))?"":e)+"</span>")},a.formatDatapoints=e=function(t,e){this&&this.block,this&&this.attributes||{};if(null!=t&&t.length){var n=t.length>1;o.push('<dl role="gridcell"'+jade.attr("aria-haspopup",n?"true":"false",!0,!1)+' aria-expanded="false" data-position="bottom left"'+jade.cls([e],[!0])+"><dt>"),a.formatPoint(t[0]),n&&o.push('<span class="fa fa-caret-down"></span>'),o.push("</dt>"),n&&(o.push("<dd><ul>"),function(){var e=t;if("number"==typeof e.length)for(var n=0,r=e.length;r>n;n++){var i=e[n];o.push("<li>"),a.formatPoint(i,!0),o.push("</li>")}else{var r=0;for(var n in e){r++;var i=e[n];o.push("<li>"),a.formatPoint(i,!0),o.push("</li>")}}}.call(this),o.push("</ul></dd>")),o.push("</dl>")}else o.push('<div role="gridcell"'+jade.cls(["placeholder",e],[null,!0])+"></div>")},o.push('<span data-input="checkbox"><input type="checkbox"'+jade.attr("id",d,!0,!1)+' name="bulk"'+jade.attr("value",s,!0,!1)+jade.attr("checked",u,!0,!1)+"/><label"+jade.attr("for",d,!0,!1)+'></label></span><a role="gridcell"'+jade.attr("href","contacts/"+t,!0,!1)+' class="name">'),n)o.push("<img"+jade.attr("data-src",n,!0,!1)+' src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="avatar"/>');else{var m=ColorHash.getColor(l,"cozy");o.push("<span"+jade.attr("style","background-color:"+m,!0,!1)+' class="avatar initials">'+jade.escape(null==(e=c)?"":e)+"</span>")}o.push("<p>"+(null==(e=i)?"":e)+"</p></a>"),a.formatDatapoints(p,"tel"),a.formatDatapoints(r,"email")}.call(this,"_id"in r?r._id:"undefined"!=typeof _id?_id:void 0,"avatar"in r?r.avatar:"undefined"!=typeof avatar?avatar:void 0,"email"in r?r.email:"undefined"!=typeof email?email:void 0,"fullname"in r?r.fullname:"undefined"!=typeof fullname?fullname:void 0,"id"in r?r.id:"undefined"!=typeof id?id:void 0,"initials"in r?r.initials:"undefined"!=typeof initials?initials:void 0,"n"in r?r.n:"undefined"!=typeof n?n:void 0,"ref"in r?r.ref:"undefined"!=typeof ref?ref:void 0,"selected"in r?r.selected:"undefined"!=typeof selected?selected:void 0,"tel"in r?r.tel:"undefined"!=typeof tel?tel:void 0),o.join("")};"function"==typeof define&&define.amd?define([],function(){return a}):"object"==typeof o&&o&&o.exports&&(o.exports=a);
}),require.register("views/templates/duplicates/index",function(e,o,a){var n=function(e){var o,a=[],n=e||{};return function(e){a.push('<div role="separator"></div><div class="wrapper"><div role="contentinfo"><h1>'+jade.escape(null==(o=t("duplicates title"))?"":o)+"</h1>"),e>0?a.push('<div role="grid"></div>'):a.push('<p class="empty">'+jade.escape(null==(o=t("duplicates empty"))?"":o)+"</p>"),a.push("</div></div>")}.call(this,"size"in n?n.size:"undefined"!=typeof size?size:void 0),a.join("")};"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof a&&a&&a.exports&&(a.exports=n)}),require.register("views/templates/duplicates/row",function(e,o,a){var n=function(e){var o,a=[],n={},r=e||{};return function(e,r,i,s,c,l){n.formatPoint=o=function(t,e){this&&this.block,this&&this.attributes||{};if(e)switch(t.type.toLowerCase()){case"home":var e="home";break;case"work":var e="building";break;default:switch(t.name){case"tel":var e="phone";break;case"email":var e="envelope";break;default:var e=!1}}a.push("<i"+jade.cls(["type",e?"fa fa-"+e:!1],[null,!0])+">"+jade.escape(null==(o=t.type)?"":o)+'&nbsp;</i><span class="value">'+(null==(o=t.value.replace(/\n/g,"<br>"))?"":o)+"</span>")},n.fullname=o=function(t){this&&this.block,this&&this.attributes||{};a.push("<p>"+(null==(o=t.toString({pre:"<b>",post:"</b>"}))?"":o)+"</p>")},n.formatDatapoints=o=function(t,e){this&&this.block,this&&this.attributes||{};null!=t&&t.length?(a.push('<dl role="gridcell" aria-haspopup="true"'+jade.cls([e],[!0])+"><dt>"),n.formatPoint(t[0]),a.push("</dt></dl>")):a.push('<div role="gridcell"'+jade.cls(["placeholder",e],[null,!0])+"></div>")},n.contactrow=o=function(t){var e=(this&&this.block,this&&this.attributes||{},t.toJSON());a.push('<div role="gridcell" class="name">'),e.avatar?a.push("<img"+jade.attr("src",e.avatar,!0,!1)+' class="avatar"/>'):a.push('<span class="avatar initials">'+jade.escape(null==(o=e.initials)?"":o)+"</span>"),n.fullname(t),a.push("</div>"),n.formatDatapoints(e.tel,"tel"),n.formatDatapoints(e.email,"email")},s?n.contactrow(s):(a.push('<dt role="columnheader">'),n.fullname(e[0]),a.push('<div class="btn-group"><button class="cancel outline secondary"><span>'+jade.escape(null==(o=t("mergerow actions dismiss"))?"":o)+'</span></button><button type="submit"'+jade.attr("disabled",!r,!0,!1)+jade.attr("aria-busy",i,!0,!1)+'><div class="fa fa-code-fork"></div><span>'+jade.escape(null==(o=t("mergerow actions merge"))?"":o)+"</span></button></div></dt><dd><ul>"),function(){var t=e;if("number"==typeof t.length)for(var o=0,r=t.length;r>o;o++){var i=t[o];a.push('<li role="presentation"><label'+jade.attr("for",i.cid,!0,!1)+' role="row"><span data-input="checkbox"><input type="checkbox"'+jade.attr("id",i.cid,!0,!1)+jade.attr("name","mergecontact-"+o,!0,!1)+jade.attr("value",""+o,!0,!1)+jade.attr("checked",c[o],!0,!1)+"/><label"+jade.attr("for",i.cid,!0,!1)+"></label></span>"),n.contactrow(i),a.push("</label></li>")}else{var r=0;for(var o in t){r++;var i=t[o];a.push('<li role="presentation"><label'+jade.attr("for",i.cid,!0,!1)+' role="row"><span data-input="checkbox"><input type="checkbox"'+jade.attr("id",i.cid,!0,!1)+jade.attr("name","mergecontact-"+o,!0,!1)+jade.attr("value",""+o,!0,!1)+jade.attr("checked",c[o],!0,!1)+"/><label"+jade.attr("for",i.cid,!0,!1)+"></label></span>"),n.contactrow(i),a.push("</label></li>")}}}.call(this),a.push("</ul></dd>"))}.call(this,"candidates"in r?r.candidates:"undefined"!=typeof candidates?candidates:void 0,"isMergeable"in r?r.isMergeable:"undefined"!=typeof isMergeable?isMergeable:void 0,"merging"in r?r.merging:"undefined"!=typeof merging?merging:void 0,"result"in r?r.result:"undefined"!=typeof result?result:void 0,"selected"in r?r.selected:"undefined"!=typeof selected?selected:void 0,"undefined"in r?r.undefined:void 0),a.join("")};"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof a&&a&&a.exports&&(a.exports=n)}),require.register("views/templates/labels/filter",function(t,e,o){var a=function(t){var e,o=[],a=t||{};return function(t,a,n){o.push("<a"+jade.attr("href","all"==t?"contacts":"tags/"+a,!0,!1)+' data-input="radio"'+jade.attr("data-id",t,!0,!1)+jade.attr("aria-checked",n?"true":"false",!0,!1)+'><input type="radio"'+jade.attr("id",t,!0,!1)+' name="label-filters"'+jade.attr("checked",n,!0,!1)+"/><label"+jade.attr("for",t,!0,!1)+"></label>"+jade.escape(null==(e=a)?"":e)+"</a>")}.call(this,"id"in a?a.id:"undefined"!=typeof id?id:void 0,"name"in a?a.name:"undefined"!=typeof name?name:void 0,"selected"in a?a.selected:"undefined"!=typeof selected?selected:void 0),o.join("")};"function"==typeof define&&define.amd?define([],function(){return a}):"object"==typeof o&&o&&o.exports&&(o.exports=a)}),require.register("views/templates/labels/index",function(e,o,a){var n=function(e){var o,a=[],n=e||{};return function(e){a.push("<legend>"+jade.escape(null==(o=t("tools labels filters"))?"":o)+"</legend><nav><ul><li>");var n="all",r=t("tools labels filters all"),i=null==e;a.push("<a"+jade.attr("href","all"==n?"contacts":"tags/"+r,!0,!1)+' data-input="radio"'+jade.attr("data-id",n,!0,!1)+jade.attr("aria-checked",i?"true":"false",!0,!1)+'><input type="radio"'+jade.attr("id",n,!0,!1)+' name="label-filters"'+jade.attr("checked",i,!0,!1)+"/><label"+jade.attr("for",n,!0,!1)+"></label>"+jade.escape(null==(o=r)?"":o)+"</a></li></ul></nav>")}.call(this,"filter"in n?n.filter:"undefined"!=typeof filter?filter:void 0),a.join("")};"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof a&&a&&a.exports&&(a.exports=n)}),require.register("views/templates/layouts/app",function(e,o,a){var n=function(e){var o,a=[],n=e||{};return function(e){a.push('<aside class="drawer"><div class="tool-actions"></div><div class="tool-labels"></div>'),"select"!=e&&a.push('<footer class="tool-subactions"><nav><ul><li><a href="settings" role="button" class="secondary"><div class="fa fa-cog"></div><span>'+jade.escape(null==(o=t("tools subactions settings"))?"":o)+"</span></a></li></ul></nav></footer>"),a.push('</aside><main><div role="toolbar"></div><div role="contentinfo" tabindex="1"><div role="grid"><div class="indexes"></div><div class="results"></div></div><div class="counter"></div></div></main><div aria-hidden="true" class="dialogs"></div><div aria-hidden="true" class="alerts"></div>')}.call(this,"mode"in n?n.mode:"undefined"!=typeof mode?mode:void 0),a.join("")};"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof a&&a&&a.exports&&(a.exports=n)}),require.register("views/templates/settings/index",function(e,o,a){var n=function(e){var o,a=[],n=e||{};return function(e,n,r,i,s){a.push('<div role="separator"></div><div class="wrapper"><div role="contentinfo"><h1>'+jade.escape(null==(o=t("settings title"))?"":o)+'</h1><div class="group"><h2>'+jade.escape(null==(o=t("settings in-out title"))?"":o)+'</h2><nav><ul><li><input type="file" name="upload"/><button class="import"><i class="fa fa-download"></i>'+jade.escape(null==(o=t("settings in-out import action"))?"":o)+'</button></li><li><button formaction="contacts/export" class="export"><i class="fa fa-upload"></i>'+jade.escape(null==(o=t("settings in-out export action"))?"":o)+"</button></li></ul></nav><div"+jade.cls(["feedback",e?"error":""],[null,!0])+">"),e&&e.upload&&a.push(jade.escape(null==(o=t(e.upload))?"":o)),a.push('</div></div><div class="group"><h2>'+jade.escape(null==(o=t("settings display title"))?"":o)+'</h2><select name="sort" class="btn outline secondary">'),function(){var e=i;if("number"==typeof e.length)for(var n=0,s=e.length;s>n;n++){var c=e[n];a.push("<option"+jade.attr("value",c,!0,!1)+jade.attr("selected",r==c,!0,!1)+">"+jade.escape(null==(o=t("settings display sort "+c))?"":o)+"</option>")}else{var s=0;for(var n in e){s++;var c=e[n];a.push("<option"+jade.attr("value",c,!0,!1)+jade.attr("selected",r==c,!0,!1)+">"+jade.escape(null==(o=t("settings display sort "+c))?"":o)+"</option>")}}}.call(this),a.push('</select></div><div class="group"><h2>'+jade.escape(null==(o=t("settings sync title"))?"":o)+"</h2><p>"+jade.escape(null==(o=t("settings sync gplay"))?"":o)+'<a target="_blank" href="https://play.google.com/store/apps/details?id=io.cozy.files_client"><img'+jade.attr("alt",t("settings sync gplay get it"),!0,!1)+jade.attr("src","//developer.android.com/images/brand/"+n+"_generic_rgb_wo_60.png",!0,!1)+"/></a></p><p>"+(null==(o=t("settings sync carddav",{link:"https://docs.cozy.io/mobile/contacts.html"}).replace(/\[(.+)\]\((.+)\)/i,'<a target="_blank" href="$2">$1</a>'))?"":o)+"</p></div></div></div>")}.call(this,"errors"in n?n.errors:"undefined"!=typeof errors?errors:void 0,"locale"in n?n.locale:"undefined"!=typeof locale?locale:void 0,"sort"in n?n.sort:"undefined"!=typeof sort?sort:void 0,"sortkeys"in n?n.sortkeys:"undefined"!=typeof sortkeys?sortkeys:void 0,"undefined"in n?n.undefined:void 0),a.join("")};"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof a&&a&&a.exports&&(a.exports=n)}),require.register("views/templates/tools/context_actions",function(e,o,a){var n=function(e){var o,a=[],n=e||{};return function(e){a.push("<legend>"+jade.escape(null==(o=t("tools contextual selected",{smart_count:e.length}))?"":o)+'</legend><nav class="select"><ul><li><button formaction="select/all">'+jade.escape(null==(o=t("tools contextual select all"))?"":o)+'</button></li><li><button formaction="select/none">'+jade.escape(null==(o=t("tools contextual select none"))?"":o)+'</button></li></ul></nav><nav><ul><li><button formaction="contacts/merge" class="secondary"><i class="fa fa-code-fork"></i>'+jade.escape(null==(o=t("tools contextual merge"))?"":o)+'</button></li><li><button formaction="contacts/export" class="secondary"><i class="fa fa-upload"></i>'+jade.escape(null==(o=t("tools contextual export"))?"":o)+'</button></li><li><button formaction="contacts/delete" class="secondary"><i class="fa fa-trash"></i>'+jade.escape(null==(o=t("tools contextual delete"))?"":o)+"</button></li></ul></nav>")}.call(this,"selected"in n?n.selected:"undefined"!=typeof selected?selected:void 0),a.join("")};"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof a&&a&&a.exports&&(a.exports=n)}),require.register("views/templates/tools/default_actions",function(e,o,a){var n=function(e){var o,a=[];return a.push('<nav><ul><li><a href="contacts/new" role="button" class="add secondary"><div class="fa fa-plus"></div><span>'+jade.escape(null==(o=t("tools actions add contact"))?"":o)+'</span></a></li><li><a href="contacts/duplicates" role="button" class="add secondary"><div class="fa fa-code-fork"></div><span>'+jade.escape(null==(o=t("tools actions find duplicates"))?"":o)+"</span></a></li></ul></nav>"),a.join("")};"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof a&&a&&a.exports&&(a.exports=n)}),require.register("views/templates/tools/search",function(e,o,a){var n=function(e){var o=[];return o.push('<span class="fa fa-search"></span><button class="fa fa-times clear"></button><input type="text" id="contacts-search"'+jade.attr("placeholder",t("tools search placeholder"),!0,!1)+' autocomplete="off"/>'),o.join("")};"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof a&&a&&a.exports&&(a.exports=n)}),require.register("views/templates/tools/toolbar",function(t,e,o){var a=function(t){var e=[];return e.push('<button class="drawer-toggle"><i class="fa fa-bars"></i></button>'),e.join("")};"function"==typeof define&&define.amd?define([],function(){return a}):"object"==typeof o&&o&&o.exports&&(o.exports=a)}),require.register("views/tools/context_actions",function(e,o,a){var n,r=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function o(){this.constructor=t}for(var a in e)s.call(e,a)&&(t[a]=e[a]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},s={}.hasOwnProperty;a.exports=n=function(e){function a(){return this._deleteModalCfg=r(this._deleteModalCfg,this),a.__super__.constructor.apply(this,arguments)}return i(a,e),a.prototype.template=o("views/templates/tools/context_actions"),a.prototype.tagName="fieldset",a.prototype.behaviors=function(){return{Confirm:{triggers:{"click @ui.delete":this._deleteModalCfg}}}},a.prototype.ui={select:'[formaction="select/all"]',unselect:'[formaction="select/none"]',merge:'[formaction="contacts/merge"]',"export":'[formaction="contacts/export"]',"delete":'[formaction="contacts/delete"]'},a.prototype.triggers={"click @ui.select":"select:all","click @ui.unselect":"select:none","click @ui.export":"bulk:export","click @ui.merge":"bulk:merge"},a.prototype.modelEvents={"change:selected":function(t,e){return e.length?this.render():void 0}},a.prototype.initialize=function(){return Mn.bindEntityEvents(this.model,this,this.model.viewEvents)},a.prototype._deleteModalCfg=function(){var e,o;return o={smart_count:this.model.get("selected").length},e={event:"bulk:delete",title:t("bulk confirm delete title",o),message:t("bulk confirm delete message",o),btn_ok:t("bulk confirm delete ok"),btn_cancel:t("bulk confirm delete cancel")}},a}(Mn.ItemView)}),require.register("views/tools/default_actions",function(t,e,o){var a,n=function(t,e){function o(){this.constructor=t}for(var a in e)r.call(e,a)&&(t[a]=e[a]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},r={}.hasOwnProperty;o.exports=a=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return n(o,t),o.prototype.template=e("views/templates/tools/default_actions"),o.prototype.tagName="fieldset",o}(Mn.ItemView)}),require.register("views/tools/search",function(t,e,o){var a,n=function(t,e){return function(){return t.apply(e,arguments)}},r=function(t,e){function o(){this.constructor=t}for(var a in e)i.call(e,a)&&(t[a]=e[a]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;o.exports=a=function(t){function o(){return this.updateSearch=n(this.updateSearch,this),o.__super__.constructor.apply(this,arguments)}return r(o,t),o.prototype.template=e("views/templates/tools/search"),o.prototype.tagName="label",o.prototype.className="empty",o.prototype.attributes={"for":"contacts-search"},o.prototype.ui={search:"input",clear:"button.clear"},o.prototype.events=function(){var t;return t=_.debounce(this.updateSearch,350),{"keyup @ui.search":function(e){var o;return o=e.currentTarget.value,this.toggleUi(o),t(o)},"click @ui.clear":this.clearSearch}},o.prototype.updateSearch=function(t){return _.isEmpty(t)&&(t=null,this.toggleUi()),e("application").search("text",t)},o.prototype.clearSearch=function(){return this.ui.search.val(""),this.toggleUi(),this.updateSearch()},o.prototype.onDomRefresh=function(){return this.ui.search.trigger("focus")},o.prototype.toggleUi=function(t){return this.$el.toggleClass("empty",_.isEmpty(t))},o}(Mn.ItemView)}),require.register("views/tools/toolbar",function(t,e,o){var a,n,r=function(t,e){function o(){this.constructor=t}for(var a in e)i.call(e,a)&&(t[a]=e[a]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},i={}.hasOwnProperty;a=e("views/tools/search"),o.exports=n=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return r(o,t),o.prototype.template=e("views/templates/tools/toolbar"),o.prototype.ui={drawer:".drawer-toggle"},o.prototype.triggers={"click @ui.drawer":"drawer:toggle"},o.prototype.onRender=function(){return(new a).render().$el.appendTo(this.$el)},o}(Mn.ItemView)});